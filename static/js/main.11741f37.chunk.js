(this["webpackJsonpreact-crud"]=this["webpackJsonpreact-crud"]||[]).push([[0],{298:function(e,t,a){},299:function(e,t,a){},401:function(e,t,a){e.exports=a(697)},407:function(e,t,a){},425:function(e,t,a){},430:function(e,t,a){},434:function(e,t,a){},435:function(e,t,a){},439:function(e,t){},441:function(e,t){},480:function(e,t){},481:function(e,t){},697:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(39),i=a.n(c),l=a(57),o=a(18),s=a(19),m=a(5),u=a(24),d=a(25),p=a(50),h=(a(406),a(407),a(42)),v=a(76),g=a.n(v);function f(){var e=JSON.parse(localStorage.getItem("user"));return e&&e.accessToken?{"x-access-token":e.accessToken}:{}}var b=g.a.create({baseURL:"http://128.199.52.198/api",headers:Object(h.a)({"Content-type":"application/json"},f())}),E=new(function(){function e(){Object(o.a)(this,e)}return Object(s.a)(e,[{key:"getAll",value:function(e){return b.get("/patients",{params:e})}},{key:"get",value:function(e){return b.get("/patients/".concat(e))}},{key:"create",value:function(e){return b.post("/patients",e)}},{key:"update",value:function(e,t){return b.put("/patients/".concat(e),t)}},{key:"delete",value:function(e){return b.delete("/patients/".concat(e))}},{key:"deleteAll",value:function(){return b.delete("/patients")}},{key:"findBySurname",value:function(e){return b.get("/patients?surname=".concat(e))}},{key:"findObservations",value:function(e){return b.get("/patients/".concat(e,"/obs"))}},{key:"deleteObservation",value:function(e,t){return b.delete("/patients/".concat(e,"/obs?observation=").concat(t))}},{key:"addObservation",value:function(e,t){return b.put("/patients/".concat(e,"/addob"),t)}}]),e}()),y=(a(298),a(21)),C=a.n(y);a(88);C.a.locale("es");var N=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).onChangeName=n.onChangeName.bind(Object(m.a)(n)),n.onChangeSurname=n.onChangeSurname.bind(Object(m.a)(n)),n.onChangeAddress=n.onChangeAddress.bind(Object(m.a)(n)),n.onChangeCity=n.onChangeCity.bind(Object(m.a)(n)),n.onChangeDni=n.onChangeDni.bind(Object(m.a)(n)),n.onChangePhone=n.onChangePhone.bind(Object(m.a)(n)),n.onChangeEmail=n.onChangeEmail.bind(Object(m.a)(n)),n.onChangeDescription=n.onChangeDescription.bind(Object(m.a)(n)),n.savePatient=n.savePatient.bind(Object(m.a)(n)),n.newPatient=n.newPatient.bind(Object(m.a)(n)),n.state={id:null,name:"",surname:"",address:"",city:"",dni:"",phone:"",email:"",description:"",active:!1,submitted:!1},n}return Object(s.a)(a,[{key:"onChangeName",value:function(e){this.setState({name:e.target.value})}},{key:"onChangeSurname",value:function(e){this.setState({surname:e.target.value})}},{key:"onChangeAddress",value:function(e){this.setState({address:e.target.value})}},{key:"onChangeCity",value:function(e){this.setState({city:e.target.value})}},{key:"onChangeDni",value:function(e){this.setState({dni:e.target.value})}},{key:"onChangePhone",value:function(e){this.setState({phone:e.target.value})}},{key:"onChangeEmail",value:function(e){this.setState({email:e.target.value})}},{key:"onChangeDescription",value:function(e){this.setState({description:e.target.value})}},{key:"savePatient",value:function(e){var t=this;if(e.preventDefault(),this.state.name||this.state.name||this.state.name){var a={name:this.state.name,surname:this.state.surname,phone:this.state.phone,address:this.state.address,city:this.state.city,dni:this.state.dni,email:this.state.email,description:this.state.description};E.create(a).then((function(e){t.setState((function(e){return{submitted:!0}}))})).catch((function(e){console.log(e)}))}}},{key:"newPatient",value:function(e){e.preventDefault(),this.setState({id:null,name:"",surname:"",address:"",city:"",dni:"",phone:"",email:"",description:"",active:!1,submitted:!1})}},{key:"render",value:function(){return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12",style:{marginTop:"10px"}},r.a.createElement("form",{autoComplete:"off"},this.state.submitted?r.a.createElement("div",null,r.a.createElement("h4",null,"A\xf1adido correctamente!"),r.a.createElement("button",{className:"btn btn-success",onClick:this.newPatient},"Nuevo")):r.a.createElement("div",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"title"},"Nombre"),r.a.createElement("input",{type:"text",className:"form-control",id:"name",required:!0,value:this.state.name,onChange:this.onChangeName,name:"name",placeholder:"Requerido"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"surname"},"Apellidos"),r.a.createElement("input",{type:"text",className:"form-control",id:"surname",required:!0,value:this.state.surname,onChange:this.onChangeSurname,name:"surname",placeholder:"Requerido"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"phone"},"Tel\xe9fono"),r.a.createElement("input",{type:"text",className:"form-control",id:"phone",required:!0,value:this.state.phone,onChange:this.onChangePhone,name:"phone",placeholder:"Requerido"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"address"},"Direcci\xf3n"),r.a.createElement("input",{type:"text",className:"form-control",id:"address",value:this.state.address,onChange:this.onChangeAddress,name:"address",autoComplete:"nope"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"city"},"Ciudad"),r.a.createElement("input",{type:"text",className:"form-control",id:"city",value:this.state.city,onChange:this.onChangeCity,name:"city",autoComplete:"nope"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"dni"},"DNI"),r.a.createElement("input",{type:"text",className:"form-control",id:"dni",value:this.state.dni,onChange:this.onChangeDni,name:"dni"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{type:"text",className:"form-control",id:"email",value:this.state.email,onChange:this.onChangeEmail,name:"email",autoComplete:"nope"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"description"},"Descripci\xf3n"),r.a.createElement("input",{type:"text",className:"form-control",id:"description",value:this.state.description,onChange:this.onChangeDescription,name:"description"})),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col text-center"},r.a.createElement("button",{style:{marginBottom:"25px",marginTop:"20px"},onClick:this.savePatient,className:"btn btn-secondary"},"A\xf1adir")))))))}}]),a}(n.Component),k=(a(425),a(367)),O=a.n(k);C.a.locale("es");var x=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).clear=function(e){e.preventDefault(),n.sigPad.clear(),n.setState((function(e){return{currentPatient:Object(h.a)({},e.currentPatient,{signature:null})}}))},n.trim=function(e){e.preventDefault(),n.setState((function(e){return{currentPatient:Object(h.a)({},e.currentPatient,{signature:this.sigPad.getTrimmedCanvas().toDataURL("image/png"),pddate:C()().format()})}}),(function(){n.hanglePDOK()}))},n.onChangeName=n.onChangeName.bind(Object(m.a)(n)),n.onChangeSurname=n.onChangeSurname.bind(Object(m.a)(n)),n.onChangeAddress=n.onChangeAddress.bind(Object(m.a)(n)),n.onChangeCity=n.onChangeCity.bind(Object(m.a)(n)),n.onChangeDni=n.onChangeDni.bind(Object(m.a)(n)),n.onChangePhone=n.onChangePhone.bind(Object(m.a)(n)),n.onChangeEmail=n.onChangeEmail.bind(Object(m.a)(n)),n.onChangeDescription=n.onChangeDescription.bind(Object(m.a)(n)),n.onChangeTutor1=n.onChangeTutor1.bind(Object(m.a)(n)),n.onChangeTutor2=n.onChangeTutor2.bind(Object(m.a)(n)),n.onChangeNIFTutor1=n.onChangeNIFTutor1.bind(Object(m.a)(n)),n.onChangeNIFTutor2=n.onChangeNIFTutor2.bind(Object(m.a)(n)),n.getPatient=n.getPatient.bind(Object(m.a)(n)),n.updateActive=n.updateActive.bind(Object(m.a)(n)),n.updatePatient=n.updatePatient.bind(Object(m.a)(n)),n.deletePatient=n.deletePatient.bind(Object(m.a)(n)),n.state={currentPatient:{id:null,name:"",surname:"",address:"",city:"",dni:"",phone:"",email:"",description:"",active:!1,signature:null,submitted:!1,tutor1:"",tutor2:"",niftutor1:"",niftutor2:"",pddate:"",pdok:!1},message:""},n.sigPad={},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.getPatient(this.props.match.params.id)}},{key:"hanglePDOK",value:function(){this.setState((function(e){var t=!!e.currentPatient.name&&!!e.currentPatient.surname&&!!e.currentPatient.address&&!!e.currentPatient.city&&!!e.currentPatient.dni&&!!e.currentPatient.phone&&!!e.currentPatient.signature;return{currentPatient:Object(h.a)({},e.currentPatient,{pdok:t})}}))}},{key:"onChangeName",value:function(e){var t=this,a=e.target.value;this.setState((function(e){return{currentPatient:Object(h.a)({},e.currentPatient,{name:a})}}),(function(){t.hanglePDOK()}))}},{key:"onChangeSurname",value:function(e){var t=this,a=e.target.value;this.setState((function(e){return{currentPatient:Object(h.a)({},e.currentPatient,{surname:a})}}),(function(){t.hanglePDOK()}))}},{key:"onChangeAddress",value:function(e){var t=this,a=e.target.value;this.setState((function(e){return{currentPatient:Object(h.a)({},e.currentPatient,{address:a})}}),(function(){t.hanglePDOK()}))}},{key:"onChangeCity",value:function(e){var t=this,a=e.target.value;this.setState((function(e){return{currentPatient:Object(h.a)({},e.currentPatient,{city:a})}}),(function(){t.hanglePDOK()}))}},{key:"onChangeDni",value:function(e){var t=this,a=e.target.value;this.setState((function(e){return{currentPatient:Object(h.a)({},e.currentPatient,{dni:a})}}),(function(){t.hanglePDOK()}))}},{key:"onChangePhone",value:function(e){var t=this,a=e.target.value;this.setState((function(e){return{currentPatient:Object(h.a)({},e.currentPatient,{phone:a})}}),(function(){t.hanglePDOK()}))}},{key:"onChangeEmail",value:function(e){var t=e.target.value;this.setState((function(e){return{currentPatient:Object(h.a)({},e.currentPatient,{email:t})}}))}},{key:"onChangeTutor1",value:function(e){var t=e.target.value;this.setState((function(e){return{currentPatient:Object(h.a)({},e.currentPatient,{tutor1:t})}}))}},{key:"onChangeTutor2",value:function(e){var t=e.target.value;this.setState((function(e){return{currentPatient:Object(h.a)({},e.currentPatient,{tutor2:t})}}))}},{key:"onChangeNIFTutor1",value:function(e){var t=e.target.value;this.setState((function(e){return{currentPatient:Object(h.a)({},e.currentPatient,{niftutor1:t})}}))}},{key:"onChangeNIFTutor2",value:function(e){var t=e.target.value;this.setState((function(e){return{currentPatient:Object(h.a)({},e.currentPatient,{niftutor2:t})}}))}},{key:"onChangeDescription",value:function(e){var t=e.target.value;this.setState((function(e){return{currentPatient:Object(h.a)({},e.currentPatient,{description:t})}}))}},{key:"getPatient",value:function(e){var t=this;E.get(e).then((function(e){t.setState({currentPatient:Object(h.a)({},e.data,{tutor1:e.data.tutor1||"",tutor2:e.data.tutor2||"",niftutor1:e.data.niftutor1||"",niftutor2:e.data.niftutor2||""})})})).catch((function(e){console.log(e)}))}},{key:"updateActive",value:function(e){var t=this,a={id:this.state.currentPatient.id,name:this.state.currentPatient.name,surname:this.state.currentPatient.surname,address:this.state.currentPatient.address,city:this.state.currentPatient.city,dni:this.state.currentPatient.dni,phone:this.state.currentPatient.phone,email:this.state.currentPatient.email,description:this.state.currentPatient.description,active:this.state.currentPatient.status,signature:this.state.currentPatient.signature,tutor1:this.state.currentPatient.tutor1,tutor2:this.state.currentPatient.tutor2,niftutor1:this.state.currentPatient.niftutor1,niftutor2:this.state.currentPatient.niftutor2,pddate:this.state.currentPatient.pddate,pdok:this.state.currentPatient.pdok};E.update(this.state.currentPatient.id,a).then((function(a){t.setState((function(t){return{currentPatient:Object(h.a)({},t.currentPatient,{active:e})}}))})).catch((function(e){console.log(e)}))}},{key:"updatePatient",value:function(e){var t=this;e.preventDefault(),E.update(this.state.currentPatient.id,this.state.currentPatient).then((function(e){t.setState({message:"Paciente actualizado correctamente!"})})).catch((function(e){console.log(e)}))}},{key:"deletePatient",value:function(){var e=this;E.delete(this.state.currentPatient.id).then((function(t){e.props.history.push("/patients")})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this,t=this.state.currentPatient;return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12",style:{marginTop:"10px"}},t.pddate,r.a.createElement("form",{autoComplete:"off"},t?r.a.createElement("div",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"name"},"Nombre"),r.a.createElement("input",{type:"text",className:"form-control",id:"name",required:!0,value:t.name,onChange:this.onChangeName,name:"name"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"surname"},"Apellidos"),r.a.createElement("input",{type:"text",className:"form-control",id:"surname",value:t.surname,onChange:this.onChangeSurname,name:"surname"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"phone"},"Tel\xe9fono"),r.a.createElement("input",{type:"text",className:"form-control",id:"phone",required:!0,value:t.phone,onChange:this.onChangePhone,name:"phone"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"address"},"Direcci\xf3n"),r.a.createElement("input",{type:"text",className:"form-control",id:"address",required:!0,value:t.address,onChange:this.onChangeAddress,name:"address",autoComplete:"nope"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"city"},"Ciudad"),r.a.createElement("input",{type:"text",className:"form-control",id:"city",required:!0,value:t.city,onChange:this.onChangeCity,name:"city",autoComplete:"nope"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"dni"},"DNI"),r.a.createElement("input",{type:"text",className:"form-control",id:"dni",required:!0,value:t.dni,onChange:this.onChangeDni,name:"dni"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{type:"text",className:"form-control",id:"email",value:t.email,onChange:this.onChangeEmail,name:"email",autoComplete:"nope"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"description"},"Descripci\xf3n"),r.a.createElement("input",{type:"text",className:"form-control",id:"description",value:t.description,onChange:this.onChangeDescription,name:"description"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"tutor1"},"Tutor 1"),r.a.createElement("input",{type:"text",className:"form-control",id:"tutor1",value:t.tutor1,onChange:this.onChangeTutor1,name:"tutor1",autoComplete:"nope"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"niftutor1"},"NIF Tutor 1"),r.a.createElement("input",{type:"text",className:"form-control",id:"niftutor1",value:t.niftutor1||"",onChange:this.onChangeNIFTutor1,name:"niftutor1",autoComplete:"nope"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"tutor2"},"Tutor 2"),r.a.createElement("input",{type:"text",className:"form-control",id:"tutor2",value:t.tutor2||"",onChange:this.onChangeTutor2,name:"tutor2",autoComplete:"nope"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"niftutor2"},"NIF Tutor 2"),r.a.createElement("input",{type:"text",className:"form-control",id:"niftutor2",value:t.niftutor2||"",onChange:this.onChangeNIFTutor2,name:"niftutor2",autoComplete:"nope"})),r.a.createElement("div",{className:"row",style:{marginTop:"100px"}},r.a.createElement("div",{className:"col"},r.a.createElement("p",null,"En base a la presente clausula HASHIME OTOMO HIDALGO (CENTRO OTOMO) solicita su consentimiento a:"))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-8"},"TUTOR: ",t.tutor1),r.a.createElement("div",{className:"col-4"},"NIF: ",t.niftutor1)),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-8"},"TUTOR: ",t.tutor2),r.a.createElement("div",{className:"col-4"},"NIF: ",t.niftutor2)),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-8"},"PACIENTE: ",t.name," ",t.surname),r.a.createElement("div",{className:"col-4"},"NIF: ",t.dni)),r.a.createElement("div",{className:"row",style:{marginTop:"40px"}},r.a.createElement("div",{className:"col"},r.a.createElement("p",null,"Para el tratamient de sus datos personales seg\xfan lo dispuesto en los art\xedculos 6 y 9 del Reglamento (UE) 2016/679 inform\xe1ndole que el tratamiento de sus datos tiene su base en la prestaci\xf3n de servicios sanitarios (Centro Otomo)"),r.a.createElement("p",null,"En cumplimiento del art\xedculo 13 del Reglamento Europeo de Protecci\xf3n de Datos, he sido informado/a de que mis datos personales pasar\xe1n a formar parte del sistema de tratamiento PACIENTES."),r.a.createElement("p",null,"La finalidad del tratamiento es la \u201cgesti\xf3n de los datos de los pacientes y de su historia cl\xednica y de las tareas administrativas derivadas de la prestaci\xf3n asistencial\u201d"),r.a.createElement("p",null,"Sus datos podr\xe1n ser cedidos a entidades sanitarias por imperativo legal y la documentaci\xf3n cl\xednica ser\xe1 conservada durante el tiempo necesario para prestar la debida asistencia al paciente y, como m\xednimo, cinco a\xf1os contados desde la fecha del alta del proceso asistencial."),r.a.createElement("p",null,"Podr\xe1 ejercitar los derechos de OPOSICI\xd3N, ACCESO, RECTIFICACI\xd3N, LIMITACI\xd3N DEL TRATAMIENTO, SUPRESI\xd3N Y PORTABILIDAD mediante escrito dirigido a HASHIME OTOMO HIDALGO (CENTRO OTOMO). RUA CASTELAO 13-15 BAJO 2 27001-LUGO acompa\xf1ando fotocopia de DNI o en su defecto documento que acredite su debida identidad o bien con car\xe1cter previo a tal actuaci\xf3n solicitar con las mismas se\xf1as que le sean remitidos los impresos que el responsable del fichero dispone a tal efecto."))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col",style:{marginBottom:"40px"}},r.a.createElement("p",null,"En LUGO a ",C()(t.pddate).format("D")," de ",C()(t.pddate).format("MMMM")," de 2020"))),r.a.createElement("div",{className:"row suplemtext"},r.a.createElement("div",{className:"col"},"Firmado Paciente/Padre/Madre/Tutor")),r.a.createElement("div",{className:"sigContainer"},r.a.createElement(O.a,{canvasProps:{className:"sigPad"},ref:function(t){e.sigPad=t}})),r.a.createElement("div",{className:"row buttons-margin"},r.a.createElement("div",{className:"col"},r.a.createElement("button",{className:"buttons",onClick:this.clear},"Reset")),r.a.createElement("div",{className:"col"},r.a.createElement("button",{className:"buttons",onClick:this.trim},"Capturar"))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col text-center"},this.state.trimmedDataURL?r.a.createElement("img",{className:"sigImage",src:this.state.trimmedDataURL,alt:"manolito"}):null)),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col text-center"},this.state.currentPatient.signature?r.a.createElement("img",{className:"sigImage",src:this.state.currentPatient.signature,alt:"manolito"}):null)),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,r.a.createElement("strong",null,"Estado:")),t.active?"Active":"Inactive"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,r.a.createElement("strong",null,"Protecci\xf3n de datos:")),t.pdok?"OK":"NO"),r.a.createElement("div",{className:"action-buttons"},t.active?r.a.createElement("button",{className:"badge badge-primary mr-2",onClick:function(){return e.updateActive(!1)}},"Desactivar"):r.a.createElement("button",{className:"badge badge-primary mr-2",onClick:function(){return e.updateActive(!0)}},"Activar"),r.a.createElement("button",{className:"badge badge-danger mr-2",onClick:this.deletePatient},"Eliminar"),r.a.createElement("button",{type:"submit",className:"badge badge-success",onClick:this.updatePatient},"Actualizar"),r.a.createElement("p",null,this.state.message))):r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("p",null,"Please click on a Patient...")))))}}]),a}(n.Component),S=a(65),j=a(729),D=(a(430),a(49)),A=a(126),w=a(26),P=new(function(){function e(){Object(o.a)(this,e)}return Object(s.a)(e,[{key:"getAll",value:function(e){return b.get("/appointments",{params:e})}},{key:"get",value:function(e){return b.get("/appointments/".concat(e))}},{key:"create",value:function(e){return b.post("/appointments",e)}},{key:"update",value:function(e,t){return b.put("/appointments/".concat(e),t)}},{key:"delete",value:function(e){return b.delete("/appointments/".concat(e))}},{key:"deleteAll",value:function(){return b.delete("/appointments")}},{key:"findBySurname",value:function(e){return b.get("/appointments?surname=".concat(e))}},{key:"findByPatientId",value:function(e){return b.get("/appointments/patient/".concat(e))}},{key:"findByDate",value:function(e){return b.get("/appointments/scheduled?date=".concat(e))}},{key:"findByDateNext",value:function(e){return b.get("/appointments/scheduled/next?date=".concat(e))}}]),e}()),I=a(103),T=a.n(I),M=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).handleKeyPress=function(e){"Enter"===e.key&&n.retrievePatients()},n.onChangeSearchSurname=n.onChangeSearchSurname.bind(Object(m.a)(n)),n.retrievePatients=n.retrievePatients.bind(Object(m.a)(n)),n.handlePageChange=n.handlePageChange.bind(Object(m.a)(n)),n.handlePageSizeChange=n.handlePageSizeChange.bind(Object(m.a)(n)),n.toggleMenu=n.toggleMenu.bind(Object(m.a)(n)),n.addAppointment=n.addAppointment.bind(Object(m.a)(n)),n.makeAppointment=n.makeAppointment.bind(Object(m.a)(n)),n.state={patients:[],searchSurname:"",page:1,count:0,pageSize:9},n.pageSizes=[3,6,9],n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.retrievePatients()}},{key:"onChangeSearchSurname",value:function(e){var t=e.target.value;this.setState({searchSurname:t})}},{key:"getRequestParams",value:function(e,t,a){var n={};return e&&(n.surname=e),t&&(n.page=t-1),a&&(n.size=a),n}},{key:"retrievePatients",value:function(){var e=this,t=this.state,a=t.searchSurname,n=t.page,r=t.pageSize,c=this.getRequestParams(a,n,r);E.getAll(c).then((function(t){var a=t.data,n=a.patients,r=a.totalPages;e.setState({patients:n,count:r})})).catch((function(e){console.log(e)}))}},{key:"handlePageChange",value:function(e,t){var a=this;this.setState({page:t},(function(){a.retrievePatients()}))}},{key:"handlePageSizeChange",value:function(e){var t=this;this.setState({pageSize:e.target.value,page:1},(function(){t.retrievePatients()}))}},{key:"toggleMenu",value:function(e){var t=Object(S.a)(this.state.patients),a=Object(h.a)({},t[e.target.getAttribute("inx")]);a.expanded=!a.expanded,t[e.target.getAttribute("inx")]=a,this.setState({patients:t})}},{key:"makeAppointment",value:function(e){console.log(this.props.match.params.id),console.log(this.props.history.push("/appointments/")),console.log("--------------------------------------------------");var t=this.props.match.params.id.split("_");console.log(t),console.log("kkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkk"),console.log(e.target.getAttribute("patientid"))}},{key:"addAppointment",value:function(e){var t=this,a=this.props.match.params.id.split("_"),n={madeBy:e.target.getAttribute("patientid"),hour:a[0],date:a[1],service:e.target.getAttribute("serviceid"),estate:"pending"};P.create(n).then((function(e){t.props.history.push("/appointments/after/"+a[2])})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.searchSurname,n=t.patients,c=t.page,i=t.count,o=t.pageSize;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 style={{ boxSizing: 'border-box' }}"},r.a.createElement("div",{className:"input-group mb-3",style:{marginTop:"10px"}},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Buscar por apellido",value:a,onChange:this.onChangeSearchSurname,onKeyPress:this.handleKeyPress}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("button",{className:"btn btn-outline-secondary",type:"button",onClick:this.retrievePatients},"Buscar"))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{id:"accordion"},n&&n.map((function(t,a){return r.a.createElement("div",{className:"card",key:a},r.a.createElement("div",{className:"card-header",id:"heading".concat(a)},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-8 col-md-9",style:{paddingLeft:"0px"}},r.a.createElement("h5",{className:"mb-0"},r.a.createElement("button",{className:"btn btn-link"+(t.expanded?"":" collapsed"),"data-toggle":"collapse","data-target":"#collapse".concat(a),"aria-expanded":t.expanded?"true":"false","aria-controls":"collapse".concat(a),inx:a,onClick:e.toggleMenu},t.surname,",\xa0 ",t.name))),r.a.createElement("div",{className:"col-4 col-md-3"},e.props.match.params.id?r.a.createElement(w.a,{as:A.a},r.a.createElement(D.a,{variant:"secondary",patientid:t.id,serviceid:"Acupuntura",onClick:e.addAppointment},r.a.createElement(T.a,{minDeviceWidth:760},(function(e){return e?"Acupuntura":"Acu"}))),r.a.createElement(w.a.Toggle,{split:!0,variant:"secondary",id:"dropdown-split-basic"}),r.a.createElement(w.a.Menu,null,r.a.createElement(w.a.Item,{patientid:t.id,serviceid:"Psicolog\xeda",onClick:e.addAppointment},"Psicolog\xeda"))):r.a.createElement(w.a,{as:A.a},r.a.createElement(D.a,{variant:"secondary",href:"/addappointment/"+t.id},"Citar"),r.a.createElement(w.a.Toggle,{split:!0,variant:"secondary",id:"dropdown-split-basic"}),r.a.createElement(w.a.Menu,null,r.a.createElement(w.a.Item,{href:"/appointments/patient/"+t.id},"Citas"),r.a.createElement(w.a.Item,{href:"/patients/"+t.id+"/obs"},"Historia"),r.a.createElement(w.a.Divider,null),r.a.createElement(w.a.Item,{href:"/addinvoice/"+t.id},"Nueva factura de acupuntura"),r.a.createElement(w.a.Divider,null),r.a.createElement(w.a.Item,{href:"/addinvoicepsico/"+t.id},"Nueva factura de psicolog\xeda"),r.a.createElement(w.a.Divider,null),r.a.createElement(w.a.Item,{href:"/patients/"+t.id},"Editar")))))),r.a.createElement("div",{id:"collapse".concat(a),className:"collapse"+(t.expanded?" show":""),"aria-labelledby":"heading".concat(a),"data-parent":"#accordion"},r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-8 col-sm-10"},r.a.createElement("p",null,t.address),r.a.createElement("p",null,t.city),r.a.createElement("p",null,"DNI: ",t.dni),r.a.createElement("p",null,"Tel: ",t.phone),r.a.createElement("p",null,t.email),r.a.createElement("p",{className:"badgePatient"},t.active?r.a.createElement("span",{className:"badge badge-primary"},"Activo"):r.a.createElement("span",{className:"badge badge-danger"},"Inactivo"))),r.a.createElement("div",{className:"col-4 col-sm-2"},r.a.createElement(l.b,{type:"button",to:"/patients/"+t.id,className:"btn btn-secondary"},"Editar"))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 col-sm-12"},r.a.createElement("p",null,"Notas: ",t.description))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 col-sm-12"},r.a.createElement("p",null,"Registrado: ",C()(t.createdAt).format("DD-MM-YYYY hh:mm:ss")))))))}))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"paging"},r.a.createElement("div",null,r.a.createElement("span",{className:"selectText"},"Refs por p\xe1gina: "),r.a.createElement("select",{onChange:this.handlePageSizeChange,value:o},this.pageSizes.map((function(e){return r.a.createElement("option",{key:e,value:e},e)})))),r.a.createElement("div",null,r.a.createElement("div",{className:"bbb"},r.a.createElement(j.a,{className:"my-3",count:i,page:c,siblingCount:1,boundaryCount:1,variant:"outlined",shape:"rounded",onChange:this.handlePageChange}))))),r.a.createElement("div",{className:"col-12"})))}}]),a}(n.Component),F=a(71),Y=a(60),B=a(727),R=a(157),L=a(80),z=(a(434),function(e){var t,a,c,i,o,s=Object(n.useState)(!1),m=Object(R.a)(s,2),u=m[0],d=m[1],p=function(){return d(!1)},h=Object(I.useMediaQuery)({query:"(max-width: 760px)"}),v=e.appointment,g=v.service,f=v.estate,b=v.madeBy;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:function(e,t,a){switch(e){case"Acupuntura":switch(t){case"pending":switch(a.pdok){case!0:return{backgroundColor:"#bde4ea",height:"40px",marginTop:"10px",marginBottom:"10px",display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"4px"};case!1:return{backgroundColor:"#bde4ea",height:"40px",marginTop:"10px",marginBottom:"10px",display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"4px",border:"2px solid red"};default:return{}}case"fulfilled":return{backgroundColor:"#bde400",height:"40px",marginTop:"10px",marginBottom:"10px",display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"4px"};case"cancelled":return{backgroundColor:"#ff4d4d",height:"40px",marginTop:"10px",marginBottom:"10px",display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"4px"};default:return{}}case"Psicolog\xeda":switch(t){case"pending":switch(a.pdok){case!0:return{backgroundColor:"#f4c9c9",height:"40px",marginTop:"10px",marginBottom:"10px",display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"4px"};case!1:return{backgroundColor:"#f4c9c9",height:"40px",marginTop:"10px",marginBottom:"10px",display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"4px",border:"2px solid red"};default:return{}}case"fulfilled":return{backgroundColor:"#bde400",height:"40px",marginTop:"10px",marginBottom:"10px",display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"4px"};case"cancelled":return{backgroundColor:"#ff4d4d",height:"40px",marginTop:"10px",marginBottom:"10px",display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"4px"};default:return{}}default:return{}}}(g,f,b),onClick:function(){return d(!0)}},h?(null===(t=e.appointment.madeBy)||void 0===t?void 0:t.name.substring(0,1))+(null===(a=e.appointment.madeBy)||void 0===a?void 0:a.surname.substring(0,1)):null===(c=e.appointment.madeBy)||void 0===c?void 0:c.name),r.a.createElement(L.a,{show:u,onHide:p},r.a.createElement(L.a.Header,{closeButton:!0},r.a.createElement(L.a.Title,null,null===(i=e.appointment.madeBy)||void 0===i?void 0:i.name," ",null===(o=e.appointment.madeBy)||void 0===o?void 0:o.surname)),r.a.createElement(L.a.Body,null,r.a.createElement("p",null,e.appointment.service),r.a.createElement("br",null),r.a.createElement("small",null,"creada: ",C()(e.appointment.createdAt).fromNow()),r.a.createElement("br",null),r.a.createElement("small",null,"xxx: ",e.appointment.madeBy.signature?"SI":"NO")),r.a.createElement(L.a.Footer,null,"pending"===e.appointment.estate?r.a.createElement("div",{className:"flex-container"},r.a.createElement("div",null,r.a.createElement(w.a,null,r.a.createElement(w.a.Toggle,{variant:"danger",id:"dropdown-basic"},"Cancelar"),r.a.createElement(w.a.Menu,null,r.a.createElement(w.a.Item,{variant:"danger",aid:e.appointment.id,arrindx:e.index,indexdate:e.indexdate,onClick:function(t){p(),e.cancelAppointment(t)}},"Cancelar la cita (definitivamente)")))),r.a.createElement("div",null,e.appointment.madeBy.signature?r.a.createElement(D.a,{variant:"primary",aid:e.appointment.id,arrindx:e.index,indexdate:e.indexdate,onClick:function(t){p(),e.fulfillAppointment(t)}},"Confirmar"):r.a.createElement(l.b,{to:{pathname:"/patients/"+e.appointment.madeBy._id,state:{invoice:"1",xxx:"2"},myCustomProps:"3"}},"Cumplimentar PD"))):"","fulfilled"===e.appointment.estate?r.a.createElement("div",null,r.a.createElement(w.a,null,r.a.createElement(w.a.Toggle,{variant:"danger",id:"dropdown-basic"},"Cancelar"),r.a.createElement(w.a.Menu,null,r.a.createElement(w.a.Item,{variant:"danger",aid:e.appointment.id,arrindx:e.index,indexdate:e.indexdate,onClick:function(t){p(),e.cancelAppointment(t)}},"Cancelar la cita (definitivamente)")))):"")))});a(435);C.a.locale("es");var U=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).deleteAppointment=function(e,t){console.log("---------- analizar: usar i o id de mongodb en key ----------------"),console.log(e),console.log(t),console.log("-------------------------------------------------------------------"),P.delete(t).then((function(t){n.setState((function(t){return{appointments:t.appointments.filter((function(t,a){return e!==a}))}}))})).catch((function(e){console.log(e)}))},n.redirectPatients=function(e,t,a){var r=e+"_"+C()(n.state.selectedDate).add(t,"days").format("DD-MM-YYYY")+"_"+a;n.props.history.push("/patients/appoint/"+r)},n.handleDateChange=n.handleDateChange.bind(Object(m.a)(n)),n.retrieveAppointments=n.retrieveAppointments.bind(Object(m.a)(n)),n.addAppointment=n.addAppointment.bind(Object(m.a)(n)),n.deleteAppointment=n.deleteAppointment.bind(Object(m.a)(n)),n.previousDates=n.previousDates.bind(Object(m.a)(n)),n.followingDates=n.followingDates.bind(Object(m.a)(n)),n.fulfillAppointment=n.fulfillAppointment.bind(Object(m.a)(n)),n.cancelAppointment=n.cancelAppointment.bind(Object(m.a)(n)),n.redirectPatients=n.redirectPatients.bind(Object(m.a)(n)),n.state={id:null,apointee:"fff",selectedDate:C()(),appointments:[],service:"Acupuntura"},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.match.params.selected?this.setState({selectedDate:C()(this.props.match.params.selected,"DD-MM-YYYY")},(function(){e.retrieveAppointments()})):this.setState({selectedDate:C()()},(function(){e.retrieveAppointments()}))}},{key:"componentDidUpdate",value:function(e,t){}},{key:"retrieveAppointments",value:function(){var e=this,t=this.state.selectedDate;P.findByDateNext(t.format("DD/MM/YYYY")).then((function(t){var a=t.data.nextFiveDates;e.setState({appointments:a})})).catch((function(e){console.log(e)}))}},{key:"handleDateChange",value:function(e){var t=this;this.setState({selectedDate:e},(function(){t.retrieveAppointments()}))}},{key:"addAppointment",value:function(e){var t=this;console.log("Esto no se ejecuta NUNCA");var a={surname:this.props.match.params.surname,hour:e.target.getAttribute("inx"),date:this.state.selectedDate.format("DD/MM/YYYY"),service:this.state.service,estate:"pending"};P.create(a).then((function(e){t.setState((function(t){return{appointments:t.appointments.concat(e.data)}}))})).catch((function(e){console.log(e)}))}},{key:"previousDates",value:function(e){var t=this;this.setState({selectedDate:C()(this.state.selectedDate,"DD-MM-YYYY").add(-5,"days")},(function(){t.retrieveAppointments()}))}},{key:"followingDates",value:function(e){var t=this;this.setState({selectedDate:C()(this.state.selectedDate,"DD-MM-YYYY").add(5,"days")},(function(){t.retrieveAppointments()}))}},{key:"cancelAppointment",value:function(e){var t=this,a=e.target.getAttribute("aid"),n=e.target.getAttribute("arrindx"),r=e.target.getAttribute("indexdate");P.update(a,{estate:"cancelled"}).then((function(e){t.setState((function(t){var a=Object(S.a)(t.appointments);return a[r][n]=e.data,{appointments:a}}))})).catch((function(e){console.log(e)}))}},{key:"fulfillAppointment",value:function(e){var t=this,a=e.target.getAttribute("aid"),n=e.target.getAttribute("arrindx"),r=e.target.getAttribute("indexdate");P.update(a,{estate:"fulfilled"}).then((function(e){t.setState((function(t){var a=Object(S.a)(t.appointments);return a[r][n]=e.data,{appointments:a}}))})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this,t={border:"1px solid lightgrey",minHeight:"80px"},a={border:"1px solid lightgrey"},n={backgroundColor:"lightgrey",width:"100px"},c={height:"40px",display:"flex",justifyContent:"center",alignItems:"center"},i=this.state,l=i.appointments,o=i.selectedDate;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-5"},r.a.createElement(Y.a,{libInstance:C.a,utils:F.a},r.a.createElement(B.a,{margin:"normal",id:"date-picker-dialog",label:"Fecha",format:"DD/MM/yyyy",value:this.state.selectedDate,onChange:this.handleDateChange,cancelLabel:"Cancelar",okLabel:"Aceptar",KeyboardButtonProps:{"aria-label":"change date"}}))),r.a.createElement("div",{className:"col-7"},r.a.createElement("div",{style:{paddingTop:"25px"}},r.a.createElement(A.a,null,r.a.createElement(D.a,{variant:"secondary",onClick:this.previousDates},"Anteriores"),r.a.createElement(D.a,{variant:"secondary",onClick:this.followingDates},"Siguientes"))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-2 col-sm-1 padding-0",style:{backgroundColor:"lightgrey"}}),Array.from({length:5},(function(e,t){return r.a.createElement("div",{className:"col col-sm",key:t,style:a},C()(o,"DD-MM-YYYY").add(t,"days").format("DD"))}))),["09:00","09:30","10:00","10:30","11:00","11:30","12:00","12:30","13:00","13:30","14:00","14:30","15:00","15:30","16:00","16:30","17:00","17:30","18:00","18:30","19:00","19:30","20:00","20:30","21:00"].map((function(a){return r.a.createElement("div",{className:"row",key:a},r.a.createElement("div",{className:"col-2 col-sm-1 padding-0",style:n},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-2"},a),r.a.createElement("div",{style:c,className:"col-10"},"\xa0"))),l&&l.map((function(n,c){return r.a.createElement("div",{className:"col col-sm padding-0",style:t,key:c,onClick:function(){e.redirectPatients(a,c,C()(e.state.selectedDate,"DD-MM-YYYY").format("DD-MM-YYYY"))}},n&&n.map((function(t,n){return a===t.hour||a===t.hour?r.a.createElement("div",{key:n,className:"appointmentItem"},r.a.createElement("div",{onClick:function(e){e.stopPropagation()}},r.a.createElement(z,{appointment:t,index:n,indexdate:c,fulfillAppointment:e.fulfillAppointment,cancelAppointment:e.cancelAppointment}))):""})))})))})),r.a.createElement("p",null,"\xa0"))))}}]),a}(n.Component),q=a(233),K=a(154),V=a(92),H=a(219);C.a.locale("es");var G=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).deleteAppointment=function(e,t){console.log("---------- analizar: usar i o id de mongodb en key ----------------"),console.log(e),console.log(t),console.log("-------------------------------------------------------------------"),P.delete(t).then((function(t){console.log(t.data),n.setState((function(t){return{appointments:t.appointments.filter((function(t,a){return e!==a}))}}))})).catch((function(e){console.log(e)}))},n.handleDateChange=n.handleDateChange.bind(Object(m.a)(n)),n.retrieveAppointments=n.retrieveAppointments.bind(Object(m.a)(n)),n.addAppointment=n.addAppointment.bind(Object(m.a)(n)),n.deleteAppointment=n.deleteAppointment.bind(Object(m.a)(n)),n.setService=n.setService.bind(Object(m.a)(n)),n.state={id:null,apointee:"",selectedDate:C()(),appointments:[],service:"Acupuntura"},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.retrieveAppointments()}},{key:"componentDidUpdate",value:function(e,t){}},{key:"retrieveAppointments",value:function(){var e=this,t=this.state.selectedDate;P.findByDate(t.format("DD/MM/YYYY")).then((function(t){var a=t.data.appointments;e.setState({appointments:a})})).catch((function(e){console.log(e)}))}},{key:"handleDateChange",value:function(e){var t=this;this.setState({selectedDate:e},(function(){t.retrieveAppointments()}))}},{key:"addAppointment",value:function(e){var t=this,a={hour:e.target.getAttribute("inx"),date:this.state.selectedDate.format("DD-MM-YYYY"),service:this.state.service,madeBy:this.props.match.params.id};P.create(a).then((function(e){t.setState((function(t){return{appointments:t.appointments.concat(e.data)}}))})).catch((function(e){console.log(e)}))}},{key:"setService",value:function(e){this.setState({service:e.target.getAttribute("service")})}},{key:"render",value:function(){var e=this,t={border:"1px solid lightgrey"},a={backgroundColor:"lightgrey"},n={backgroundColor:"#bde4ea",margin:"5px"},c={backgroundColor:"#f4c9c9",margin:"5px"},i=this.state.appointments;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-5"},r.a.createElement(Y.a,{libInstance:C.a,utils:F.a},r.a.createElement(B.a,{margin:"normal",id:"date-picker-dialog",label:"Fecha",format:"DD/MM/yyyy",minDate:C()(),value:this.state.selectedDate,onChange:this.handleDateChange,cancelLabel:"Cancelar",okLabel:"Aceptar",KeyboardButtonProps:{"aria-label":"change date"}}))),r.a.createElement("div",{className:"col-7"},r.a.createElement("div",{style:{paddingTop:"25px"}},r.a.createElement(K.a,null,r.a.createElement(V.a,{as:K.a.Prepend,variant:"outline-secondary",title:"Servicio",id:"input-group-dropdown-1"},r.a.createElement(w.a.Item,{href:"#",service:"Acupuntura",onClick:this.setService},"Acupuntura"),r.a.createElement(w.a.Item,{href:"#",service:"Psicolog\xeda",onClick:this.setService},"Psicolog\xeda"),r.a.createElement(w.a.Divider,null),r.a.createElement(w.a.Item,{href:"#"},"Otros")),r.a.createElement(H.a,{"aria-describedby":"basic-addon1",value:this.state.service,readOnly:!0}))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},Array.from({length:12},(function(l,o){return r.a.createElement("div",{className:"row",key:o},r.a.createElement("div",{className:"col-2",style:a},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-2"},(o+9).toString()+":00"),r.a.createElement("div",{className:"col-10"},r.a.createElement("button",{style:{marginLeft:"0px"},inx:(o+9).toString()+":00",onClick:e.addAppointment,className:"btn btn-secondary"},"+")))),r.a.createElement("div",{className:"col-10",style:t},i&&i.map((function(t,a){return(o+9).toString()+":00"===t.hour?r.a.createElement(q.a,{onClose:function(){return e.deleteAppointment(a,t.id)},style:"Acupuntura"===t.service?n:c,key:a},r.a.createElement(q.a.Header,null,r.a.createElement("img",{src:"holder.js/20x20?text=%20",className:"rounded mr-2",alt:""}),r.a.createElement("strong",{className:"mr-auto"},t.service),r.a.createElement("small",null,C()(t.createdAt).fromNow())),r.a.createElement(q.a.Body,null,t.madeBy.surname,", ",t.madeBy.name)):""}))))})),r.a.createElement("p",null,"\xa0"))))}}]),a}(n.Component),_=a(63),W=a(370),J=a(277),X=a(155);var Q=function(e){var t=Object(n.useState)(C()()),a=Object(R.a)(t,2),c=a[0],i=a[1],l=Object(n.useState)(C()()),o=Object(R.a)(l,2),s=o[0],m=o[1],u=Object(n.useState)("pending"),d=Object(R.a)(u,2),p=d[0],h=d[1];function v(e){console.log(e.target.getAttribute("filter")),h(e.target.getAttribute("filter"))}return r.a.createElement(r.a.Fragment,null,r.a.createElement(D.a,{variant:"primary",onClick:e.handleShow},"Filtrar"),r.a.createElement(L.a,{show:e.show,onHide:e.handleClose},r.a.createElement(L.a.Header,{closeButton:!0},r.a.createElement(L.a.Title,null,"Filtrar citas")),r.a.createElement(L.a.Body,null,r.a.createElement(W.a,null,r.a.createElement(J.a,null,r.a.createElement(X.a,{xs:6,md:4},r.a.createElement(Y.a,{libInstance:C.a,utils:F.a},r.a.createElement(B.a,{margin:"normal",id:"date-picker-dialog-1",format:"DD/MM/yyyy",value:c,onChange:i,cancelLabel:"Cancelar",okLabel:"Aceptar",KeyboardButtonProps:{"aria-label":"change date"}}))),r.a.createElement(X.a,{xs:6,md:4},r.a.createElement(Y.a,{libInstance:C.a,utils:F.a},r.a.createElement(B.a,{margin:"normal",id:"date-picker-dialog-2",format:"DD/MM/yyyy",value:s,onChange:m,cancelLabel:"Cancelar",okLabel:"Aceptar",KeyboardButtonProps:{"aria-label":"change date"}})))),r.a.createElement(J.a,null,r.a.createElement(X.a,{xs:12,md:8},r.a.createElement(K.a,null,r.a.createElement(V.a,{as:K.a.Prepend,variant:"outline-secondary",title:p,id:"input-group-dropdown-1"},r.a.createElement(w.a.Item,{href:"#",filter:"pending",onClick:v},"Pendientes"),r.a.createElement(w.a.Item,{href:"#",filter:"cancelled",onClick:v},"Canceladas"),r.a.createElement(w.a.Item,{href:"#",filter:"fulfilled",onClick:v},"Cumplidas"),r.a.createElement(w.a.Item,{href:"#",filter:"all",onClick:v},"Todas"))))))),r.a.createElement(L.a.Footer,null,r.a.createElement(D.a,{variant:"secondary",onClick:e.handleClose},"Cerrar"),r.a.createElement(D.a,{variant:"primary",onClick:function(t){e.handleState(p)}},"Filtrar"))))};C.a.locale("es");var $=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).handleDateChange=n.handleDateChange.bind(Object(m.a)(n)),n.retrieveAppointments=n.retrieveAppointments.bind(Object(m.a)(n)),n.setFilter=n.setFilter.bind(Object(m.a)(n)),n.cancelAppointment=n.cancelAppointment.bind(Object(m.a)(n)),n.fulfillAppointment=n.fulfillAppointment.bind(Object(m.a)(n)),n.handleCloseModal=n.handleCloseModal.bind(Object(m.a)(n)),n.handleShowModal=n.handleShowModal.bind(Object(m.a)(n)),n.handleState=n.handleState.bind(Object(m.a)(n)),n.state={id:n.props.match.params.id,filter:"pending",selectedDate:C()(),appointments:[],service:"Acupuntura",show:!1},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){console.log("kkkkkkkkkkkkkkk"),this.retrieveAppointments()}},{key:"componentDidUpdate",value:function(e,t){}},{key:"retrieveAppointments",value:function(){var e=this,t=this.state.id;P.findByPatientId(t).then((function(t){var a=t.data.appointments;e.setState({appointments:a})})).catch((function(e){console.log(e)}))}},{key:"handleDateChange",value:function(e){var t=this;this.setState({selectedDate:e},(function(){t.retrieveAppointments()}))}},{key:"cancelAppointment",value:function(e){var t=this,a=e.target.getAttribute("aid"),n=e.target.getAttribute("arrindx");P.update(a,{estate:"cancelled"}).then((function(e){console.log(e.data),t.setState((function(t){var a=Object(S.a)(t.appointments);return a[n]=e.data,{appointments:a}}))})).catch((function(e){console.log(e)}))}},{key:"fulfillAppointment",value:function(e){var t=this,a=e.target.getAttribute("aid"),n=e.target.getAttribute("arrindx");P.update(a,{estate:"fulfilled"}).then((function(e){console.log(e.data),t.setState((function(t){var a=Object(S.a)(t.appointments);return a[n]=e.data,console.log(a),{appointments:a}}))})).catch((function(e){console.log(e)}))}},{key:"setFilter",value:function(e){this.setState({filter:e.target.getAttribute("filter")})}},{key:"handleState",value:function(e){this.setState({show:!1,filter:e})}},{key:"handleCloseModal",value:function(){this.setState({show:!1})}},{key:"handleShowModal",value:function(){this.setState({show:!0})}},{key:"render",value:function(){var e=this,t=this.state,a=t.appointments,n=t.filter,c=t.show;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},a&&a.filter((function(e){return"all"===n||e.estate===n})).map((function(t,a){return r.a.createElement(_.a,{style:{marginBottom:"10px",marginTop:"10px"},key:a},r.a.createElement(_.a.Body,null,r.a.createElement(_.a.Title,null,t.service),r.a.createElement(_.a.Subtitle,{className:"mb-2 text-muted"},C()(t.date).format("DD-MM-YYYY"),"\xa0a las ",t.hour),r.a.createElement(_.a.Text,null,t.madeBy.name,"\xa0",t.madeBy.surname,r.a.createElement("br",null),r.a.createElement("small",null,"creada ",C()(t.createdAt).fromNow()),r.a.createElement("br",null),r.a.createElement("small",null,t.id),r.a.createElement("br",null)),"pending"===t.estate?r.a.createElement("div",null,r.a.createElement(_.a.Link,{href:"",aid:t.id,arrindx:a,onClick:e.cancelAppointment},"Cancelar"),r.a.createElement(_.a.Link,{href:"",aid:t.id,arrindx:a,onClick:e.fulfillAppointment},"Cumplir")):"fulfilled"===t.estate?r.a.createElement("span",{className:"badge badge-success"},"Cumplida"):r.a.createElement("span",{className:"badge badge-warning"},"Cancelada")))})),r.a.createElement("p",null,"\xa0"))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{style:{},className:"col-12"},r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement(Q,{show:c,handleClose:this.handleCloseModal,handleShow:this.handleShowModal,handleState:this.handleState})),r.a.createElement("p",null,"\xa0"))))}}]),a}(n.Component),Z=g.a.create({baseURL:"http://128.199.52.198/api",responseType:"blob"}),ee=new(function(){function e(){Object(o.a)(this,e)}return Object(s.a)(e,[{key:"getAll",value:function(e){return b.get("/invoices",{params:e})}},{key:"generateExcel",value:function(e){return b.get("/invoices/genexcel",{params:e})}},{key:"downloadExcel",value:function(){return Z.get("/invoices/downloadexcel")}},{key:"get",value:function(e){return b.get("/invoices/".concat(e))}},{key:"create",value:function(e){return b.post("/invoices",e)}},{key:"update",value:function(e,t){return b.put("/invoices/".concat(e),t)}},{key:"delete",value:function(e){return b.delete("/invoices/".concat(e))}},{key:"deleteAll",value:function(){return b.delete("/invoices")}},{key:"findBySurname",value:function(e){return b.get("/invoices?surname=".concat(e))}},{key:"findByPatientId",value:function(e){return b.get("/invoices/patient/".concat(e))}},{key:"findByDate",value:function(e){return b.get("/invoices/scheduled?date=".concat(e))}},{key:"findByDateNext",value:function(e){return b.get("/invoices/scheduled/next?date=".concat(e))}}]),e}()),te=(a(299),function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).handleKeyPress=function(e){"Enter"===e.key&&n.retrieveInvoices()},n.onChangeSearchSurname=n.onChangeSearchSurname.bind(Object(m.a)(n)),n.retrieveInvoices=n.retrieveInvoices.bind(Object(m.a)(n)),n.handlePageChange=n.handlePageChange.bind(Object(m.a)(n)),n.handlePageSizeChange=n.handlePageSizeChange.bind(Object(m.a)(n)),n.toggleMenu=n.toggleMenu.bind(Object(m.a)(n)),n.setDate1=n.setDate1.bind(Object(m.a)(n)),n.setDate2=n.setDate2.bind(Object(m.a)(n)),n.cancelInvoice=n.cancelInvoice.bind(Object(m.a)(n)),n.sayHi=n.sayHi.bind(Object(m.a)(n)),n.generateExcel=n.generateExcel.bind(Object(m.a)(n)),n.descExcel=n.descExcel.bind(Object(m.a)(n)),n.state={invoices:[],searchSurname:"",date1:C()().startOf("quarter"),date2:C()(),page:1,count:0,pageSize:6,total:0,numberInvoices:0,numCanInvoices:0,downloadExcel:!1},n.pageSizes=[3,6,9],n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.retrieveInvoices()}},{key:"onChangeSearchSurname",value:function(e){var t=e.target.value;this.setState({searchSurname:t})}},{key:"getRequestParams",value:function(e,t,a,n,r){var c={};return e&&(c.surname=e),t&&(c.date1=t),a&&(c.date2=a),n&&(c.page=n-1),r&&(c.size=r),c}},{key:"generateExcel",value:function(){var e=this,t=this.state,a=t.searchSurname,n=t.date1,r=t.date2,c=t.page,i=t.pageSize,l=this.getRequestParams(a,n.format("DD-MM-YYYY"),r.format("DD-MM-YYYY"),c,i);ee.generateExcel(l).then((function(t){var a=t.data.estate;e.setState({downloadExcel:a})})).catch((function(e){console.log(e)}))}},{key:"descExcel",value:function(){ee.downloadExcel().then((function(e){var t=window.URL.createObjectURL(new Blob([e.data])),a=document.createElement("a");a.href=t,a.setAttribute("download","Acupuntura.xlsx"),document.body.appendChild(a),a.click()})).catch((function(e){console.log(e)}))}},{key:"retrieveInvoices",value:function(){var e=this,t=this.state,a=t.searchSurname,n=t.date1,r=t.date2,c=t.page,i=t.pageSize,l=this.getRequestParams(a,n.format("DD-MM-YYYY"),r.format("DD-MM-YYYY"),c,i);ee.getAll(l).then((function(t){var a=t.data,n=a.invoices,r=a.totalPages,c=a.totalInvoices,i=a.numberInvoices,l=a.numCanInvoices;e.setState({invoices:n,count:r,total:c,numberInvoices:i,numCanInvoices:l})})).catch((function(e){console.log(e)}))}},{key:"handlePageChange",value:function(e,t){var a=this;this.setState({page:t},(function(){a.retrieveInvoices()}))}},{key:"handlePageSizeChange",value:function(e){var t=this;this.setState({pageSize:e.target.value,page:1},(function(){t.retrieveInvoices()}))}},{key:"toggleMenu",value:function(e){var t=Object(S.a)(this.state.invoices),a=Object(h.a)({},t[e.target.getAttribute("inx")]);a.expanded=!a.expanded,t[e.target.getAttribute("inx")]=a,this.setState({invoices:t})}},{key:"setDate1",value:function(e){var t=this;this.setState({date1:e,pageSize:3,page:1,count:0},(function(){t.retrieveInvoices()}))}},{key:"setDate2",value:function(e){var t=this;this.setState({date2:e,pageSize:3,page:1,count:0},(function(){t.retrieveInvoices()}))}},{key:"cancelInvoice",value:function(e){var t=this,a=e.target.getAttribute("aid"),n=e.target.getAttribute("arrindx");ee.update(a,{estate:"cancelled"}).then((function(e){t.setState((function(t){var a=Object(S.a)(t.invoices);a[n]=e.data;var r=t.total;r-=e.data.total;var c=t.numberInvoices;c-=1;var i=t.numCanInvoices;return{invoices:a,total:r,numberInvoices:c,numCanInvoices:i+=1,downloadExcel:!1}}))})).catch((function(e){console.log(e)}))}},{key:"sayHi",value:function(){console.log("hi")}},{key:"render",value:function(){var e=this,t=this.state,a=t.searchSurname,n=t.invoices,c=t.date1,i=t.date2,o=t.page,s=t.count,m=t.pageSize,u=t.total,d=t.numberInvoices,p=t.numCanInvoices,h=t.downloadExcel;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"input-group mb-3",style:{marginTop:"10px"}},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Buscar por apellido",value:a,onChange:this.onChangeSearchSurname,onKeyPress:this.handleKeyPress}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("button",{className:"btn btn-outline-secondary",type:"button",onClick:this.retrieveInvoices},"Buscar"))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-6"},r.a.createElement(Y.a,{libInstance:C.a,utils:F.a},r.a.createElement(B.a,{margin:"normal",id:"date-picker-dialog-1",format:"DD/MM/yyyy",value:c,onChange:this.setDate1,cancelLabel:"Cancelar",okLabel:"Aceptar",KeyboardButtonProps:{"aria-label":"change date"}}))),r.a.createElement("div",{className:"col-6"},r.a.createElement(Y.a,{libInstance:C.a,utils:F.a},r.a.createElement(B.a,{margin:"normal",id:"date-picker-dialog-2",format:"DD/MM/yyyy",value:i,onChange:this.setDate2,cancelLabel:"Cancelar",okLabel:"Aceptar",KeyboardButtonProps:{"aria-label":"change date"}})))),r.a.createElement("div",{className:"row",style:{marginTop:"10px"}},r.a.createElement("div",{className:"col-7 col-sm-9"},r.a.createElement("span",null,"Total: ",u," | #: ",d," | X: ",p)),r.a.createElement("div",{className:"col-5 col-sm-3"},r.a.createElement(D.a,{variant:"secondary",size:"sm",onClick:h?this.descExcel:this.generateExcel,className:"float-right"},h?"Descargar":"Generar Excel"))),n&&n.map((function(t,a){return r.a.createElement("div",{className:"row",key:a,style:{marginTop:"10px"}},r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"card",style:{marginBottom:"10px"},key:a},r.a.createElement("div",{className:"card-header"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-8"},t.inumber,"/",C()(t.createdAt).format("YYYY"),"\xa0\xa0\xa0",C()(t.date).format("DD-MM-YYYY")),r.a.createElement("div",{className:"col-4"},"emitted"===t.estate?r.a.createElement("div",{className:"d-flex justify-content-end"},r.a.createElement(V.a,{variant:"danger",size:"sm",id:"dropdown-basic-button",title:"Cancelar"},r.a.createElement(w.a.Item,{href:"",aid:t.id,arrindx:a,onClick:e.cancelInvoice},"Irreversiblemente"))):"cancelled"===t.estate?r.a.createElement("div",{className:"d-flex justify-content-end"},r.a.createElement("span",{className:"badge badge-danger"},"Cancelada")):r.a.createElement("div",{className:"d-flex justify-content-end"},r.a.createElement("span",{className:"badge badge-danger"},"Pagada"))))),r.a.createElement("div",{className:"card-body"},r.a.createElement("h6",{className:"card-title"},t.name.charAt(0).toUpperCase()+t.name.slice(1),"\xa0",t.surname.charAt(0).toUpperCase()+t.surname.slice(1)),r.a.createElement("p",{className:"card-text"},t.address,"\xa0-\xa0",t.city,r.a.createElement("br",null),t.dni),r.a.createElement("div",{className:"row",style:{borderRadius:"3px",background:"#F7F7F7",border:"1px solid lightgrey"}},r.a.createElement("div",{className:"col-6 col-sm-6"},r.a.createElement("span",null,"Concepto")),r.a.createElement("div",{className:"col-0 col-sm-1 d-none d-sm-block",style:{paddingLeft:"0px",paddingRight:"0px"}},r.a.createElement("span",null,"Ses")),r.a.createElement("div",{className:"col-2 col-sm-2",style:{paddingLeft:"0px",paddingRight:"0px"}},"Base"),r.a.createElement("div",{className:"col-1 col-sm-1",style:{paddingLeft:"0px",paddingRight:"0px"}},r.a.createElement("span",null,"IVA")),r.a.createElement("div",{className:"col-3 col-sm-2"},r.a.createElement("span",null,"Total"))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-6 col-sm-6"},r.a.createElement(T.a,{maxWidth:576},(function(e){return e?r.a.createElement("span",null,t.sessions+"x "+t.concept):r.a.createElement("span",null,t.concept)}))),r.a.createElement("div",{className:"col-0 col-sm-1 d-none d-sm-block",style:{paddingLeft:"0px",paddingRight:"0px"}},r.a.createElement("span",null,t.sessions)),r.a.createElement("div",{className:"col-2 col-sm-2",style:{paddingLeft:"0px",paddingRight:"0px"}},r.a.createElement("span",null,t.base)),r.a.createElement("div",{className:"col-1 col-sm-1",style:{paddingLeft:"0px",paddingRight:"0px"}},r.a.createElement("span",null,t.iva)),r.a.createElement("div",{className:"col-3 col-sm-2"},r.a.createElement("span",null,t.total))),r.a.createElement("hr",null),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-6"},r.a.createElement(T.a,{maxWidth:576},(function(e){return e?r.a.createElement(l.b,{to:{pathname:"/invoicesmobile/pdf/"+t.inumber,state:{invoice:t,xxx:t.name},myCustomProps:"invoice"}},"Descargar PDF"):r.a.createElement(l.b,{to:{pathname:"/invoices/pdf/"+t.inumber,state:{invoice:t,xxx:t.name},myCustomProps:"invoice"}},"Ver PDF")}))),r.a.createElement("div",{className:"col-6 d-flex justify-content-end",style:{paddingTop:"3px"}},r.a.createElement("small",null,t.emittedTo?t.emittedTo._id:"ficha eliminada")))))))})),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12",style:{marginBottom:"10px"}},r.a.createElement("div",{className:"paging"},r.a.createElement("div",null,r.a.createElement("span",{className:"selectText"},"Refs por p\xe1gina: "),r.a.createElement("select",{onChange:this.handlePageSizeChange,value:m},this.pageSizes.map((function(e){return r.a.createElement("option",{key:e,value:e},e)})))),r.a.createElement("div",null,r.a.createElement("div",{className:"bbb"},r.a.createElement(j.a,{className:"my-3",count:s,page:o,siblingCount:1,boundaryCount:1,variant:"outlined",shape:"rounded",onChange:this.handlePageChange})))))))}}]),a}(n.Component)),ae=new(function(){function e(){Object(o.a)(this,e)}return Object(s.a)(e,[{key:"getAll",value:function(e){return b.get("/invoicesp",{params:e})}},{key:"generateExcel",value:function(e){return b.get("/invoicesp/genexcel",{params:e})}},{key:"downloadExcel",value:function(){return Z.get("/invoicesp/downloadexcel")}},{key:"get",value:function(e){return b.get("/invoicesp/".concat(e))}},{key:"create",value:function(e){return b.post("/invoicesp",e)}},{key:"update",value:function(e,t){return b.put("/invoicesp/".concat(e),t)}},{key:"delete",value:function(e){return b.delete("/invoicesp/".concat(e))}},{key:"deleteAll",value:function(){return b.delete("/invoicesp")}},{key:"findBySurname",value:function(e){return b.get("/invoicesp?surname=".concat(e))}},{key:"findByPatientId",value:function(e){return b.get("/invoicesp/patient/".concat(e))}},{key:"findByDate",value:function(e){return b.get("/invoicesp/scheduled?date=".concat(e))}},{key:"findByDateNext",value:function(e){return b.get("/invoicesp/scheduled/next?date=".concat(e))}}]),e}()),ne=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).handleKeyPress=function(e){"Enter"===e.key&&n.retrieveInvoices()},n.onChangeSearchSurname=n.onChangeSearchSurname.bind(Object(m.a)(n)),n.retrieveInvoices=n.retrieveInvoices.bind(Object(m.a)(n)),n.handlePageChange=n.handlePageChange.bind(Object(m.a)(n)),n.handlePageSizeChange=n.handlePageSizeChange.bind(Object(m.a)(n)),n.toggleMenu=n.toggleMenu.bind(Object(m.a)(n)),n.setDate1=n.setDate1.bind(Object(m.a)(n)),n.setDate2=n.setDate2.bind(Object(m.a)(n)),n.cancelInvoice=n.cancelInvoice.bind(Object(m.a)(n)),n.sayHi=n.sayHi.bind(Object(m.a)(n)),n.generateExcel=n.generateExcel.bind(Object(m.a)(n)),n.descExcel=n.descExcel.bind(Object(m.a)(n)),n.state={invoices:[],searchSurname:"",date1:C()().startOf("quarter"),date2:C()(),page:1,count:0,pageSize:6,total:0,numberInvoices:0,numCanInvoices:0,downloadExcel:!1},n.pageSizes=[3,6,9],n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.retrieveInvoices()}},{key:"onChangeSearchSurname",value:function(e){var t=e.target.value;this.setState({searchSurname:t})}},{key:"getRequestParams",value:function(e,t,a,n,r){var c={};return e&&(c.surname=e),t&&(c.date1=t),a&&(c.date2=a),n&&(c.page=n-1),r&&(c.size=r),c}},{key:"generateExcel",value:function(){var e=this,t=this.state,a=t.searchSurname,n=t.date1,r=t.date2,c=t.page,i=t.pageSize,l=this.getRequestParams(a,n.format("DD-MM-YYYY"),r.format("DD-MM-YYYY"),c,i);ae.generateExcel(l).then((function(t){var a=t.data.estate;e.setState({downloadExcel:a})})).catch((function(e){console.log(e)}))}},{key:"descExcel",value:function(){ae.downloadExcel().then((function(e){var t=window.URL.createObjectURL(new Blob([e.data])),a=document.createElement("a");a.href=t,a.setAttribute("download","Psicologia.xlsx"),document.body.appendChild(a),a.click()})).catch((function(e){console.log(e)}))}},{key:"retrieveInvoices",value:function(){var e=this,t=this.state,a=t.searchSurname,n=t.date1,r=t.date2,c=t.page,i=t.pageSize,l=this.getRequestParams(a,n.format("DD-MM-YYYY"),r.format("DD-MM-YYYY"),c,i);ae.getAll(l).then((function(t){var a=t.data,n=a.invoices,r=a.totalPages,c=a.totalInvoices,i=a.numberInvoices,l=a.numCanInvoices;e.setState({invoices:n,count:r,total:c,numberInvoices:i,numCanInvoices:l})})).catch((function(e){console.log(e)}))}},{key:"handlePageChange",value:function(e,t){var a=this;this.setState({page:t},(function(){a.retrieveInvoices()}))}},{key:"handlePageSizeChange",value:function(e){var t=this;this.setState({pageSize:e.target.value,page:1},(function(){t.retrieveInvoices()}))}},{key:"toggleMenu",value:function(e){var t=Object(S.a)(this.state.invoices),a=Object(h.a)({},t[e.target.getAttribute("inx")]);a.expanded=!a.expanded,t[e.target.getAttribute("inx")]=a,this.setState({invoices:t})}},{key:"setDate1",value:function(e){var t=this;this.setState({date1:e,pageSize:3,page:1,count:0},(function(){t.retrieveInvoices()}))}},{key:"setDate2",value:function(e){var t=this;this.setState({date2:e,pageSize:3,page:1,count:0},(function(){t.retrieveInvoices()}))}},{key:"cancelInvoice",value:function(e){var t=this,a=e.target.getAttribute("aid"),n=e.target.getAttribute("arrindx");ae.update(a,{estate:"cancelled"}).then((function(e){t.setState((function(t){var a=Object(S.a)(t.invoices);a[n]=e.data;var r=t.total;r-=e.data.total;var c=t.numberInvoices;c-=1;var i=t.numCanInvoices;return{invoices:a,total:r,numberInvoices:c,numCanInvoices:i+=1,downloadExcel:!1}}))})).catch((function(e){console.log(e)}))}},{key:"sayHi",value:function(){console.log("hi")}},{key:"render",value:function(){var e=this,t=this.state,a=t.searchSurname,n=t.invoices,c=t.date1,i=t.date2,o=t.page,s=t.count,m=t.pageSize,u=t.total,d=t.numberInvoices,p=t.numCanInvoices,h=t.downloadExcel;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"input-group mb-3",style:{marginTop:"10px"}},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Buscar por apellido",value:a,onChange:this.onChangeSearchSurname,onKeyPress:this.handleKeyPress}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("button",{className:"btn btn-outline-secondary",type:"button",onClick:this.retrieveInvoices},"Buscar"))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-6"},r.a.createElement(Y.a,{libInstance:C.a,utils:F.a},r.a.createElement(B.a,{margin:"normal",id:"date-picker-dialog-1",format:"DD/MM/yyyy",value:c,onChange:this.setDate1,cancelLabel:"Cancelar",okLabel:"Aceptar",KeyboardButtonProps:{"aria-label":"change date"}}))),r.a.createElement("div",{className:"col-6"},r.a.createElement(Y.a,{libInstance:C.a,utils:F.a},r.a.createElement(B.a,{margin:"normal",id:"date-picker-dialog-2",format:"DD/MM/yyyy",value:i,onChange:this.setDate2,cancelLabel:"Cancelar",okLabel:"Aceptar",KeyboardButtonProps:{"aria-label":"change date"}})))),r.a.createElement("div",{className:"row",style:{marginTop:"10px"}},r.a.createElement("div",{className:"col-7 col-sm-9"},r.a.createElement("span",null,"Total: ",u," | #: ",d," | X: ",p)),r.a.createElement("div",{className:"col-5 col-sm-3"},r.a.createElement(D.a,{variant:"secondary",size:"sm",onClick:h?this.descExcel:this.generateExcel,className:"float-right"},h?"Descargar":"Generar Excel"))),n&&n.map((function(t,a){return r.a.createElement("div",{className:"row",key:a,style:{marginTop:"10px"}},r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"card",style:{marginBottom:"10px"},key:a},r.a.createElement("div",{className:"card-header"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-8"},t.inumber,"/",C()(t.createdAt).format("YYYY"),"\xa0\xa0\xa0",C()(t.date).format("DD-MM-YYYY")),r.a.createElement("div",{className:"col-4"},"emitted"===t.estate?r.a.createElement("div",{className:"d-flex justify-content-end"},r.a.createElement(V.a,{variant:"danger",size:"sm",id:"dropdown-basic-button",title:"Cancelar"},r.a.createElement(w.a.Item,{href:"",aid:t.id,arrindx:a,onClick:e.cancelInvoice},"Irreversiblemente"))):"cancelled"===t.estate?r.a.createElement("div",{className:"d-flex justify-content-end"},r.a.createElement("span",{className:"badge badge-danger"},"Cancelada")):r.a.createElement("div",{className:"d-flex justify-content-end"},r.a.createElement("span",{className:"badge badge-danger"},"Pagada"))))),r.a.createElement("div",{className:"card-body"},r.a.createElement("h6",{className:"card-title"},t.name.charAt(0).toUpperCase()+t.name.slice(1),"\xa0",t.surname.charAt(0).toUpperCase()+t.surname.slice(1)),r.a.createElement("p",{className:"card-text"},t.address,"\xa0-\xa0",t.city,r.a.createElement("br",null),t.dni),r.a.createElement("div",{className:"row",style:{borderRadius:"3px",background:"#F7F7F7",border:"1px solid lightgrey"}},r.a.createElement("div",{className:"col-6 col-sm-6"},r.a.createElement("span",null,"Concepto")),r.a.createElement("div",{className:"col-3 col-sm-3",style:{paddingLeft:"0px",paddingRight:"0px"}},r.a.createElement("span",null,"Sesiones")),r.a.createElement("div",{className:"col-3 col-sm-3"},r.a.createElement("span",null,"Total"))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-6 col-sm-6"},r.a.createElement("span",null,t.concept)),r.a.createElement("div",{className:"col-3 col-sm-3",style:{paddingLeft:"0px",paddingRight:"0px"}},r.a.createElement("span",null,t.sessions)),r.a.createElement("div",{className:"col-3 col-sm-3"},r.a.createElement("span",null,t.total))),r.a.createElement("hr",null),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-6"},r.a.createElement(T.a,{maxWidth:576},(function(e){return e?r.a.createElement(l.b,{to:{pathname:"/invoicespsicomobile/pdf/"+t.inumber,state:{invoice:t,xxx:t.name},myCustomProps:"invoice"}},"Descargar PDF"):r.a.createElement(l.b,{to:{pathname:"/invoicespsico/pdf/"+t.inumber,state:{invoice:t,xxx:t.name},myCustomProps:"invoice"}},"Ver PDF")}))),r.a.createElement("div",{className:"col-6 d-flex justify-content-end",style:{paddingTop:"3px"}},r.a.createElement("small",null,t.emittedTo?t.emittedTo._id:"ficha eliminada")))))))})),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12",style:{marginBottom:"10px"}},r.a.createElement("div",{className:"paging"},r.a.createElement("div",null,r.a.createElement("span",{className:"selectText"},"Refs por p\xe1gina: "),r.a.createElement("select",{onChange:this.handlePageSizeChange,value:m},this.pageSizes.map((function(e){return r.a.createElement("option",{key:e,value:e},e)})))),r.a.createElement("div",null,r.a.createElement("div",{className:"bbb"},r.a.createElement(j.a,{className:"my-3",count:s,page:o,siblingCount:1,boundaryCount:1,variant:"outlined",shape:"rounded",onChange:this.handlePageChange})))))))}}]),a}(n.Component),re=new(function(){function e(){Object(o.a)(this,e)}return Object(s.a)(e,[{key:"getAll",value:function(e){return b.get("/services",{params:e})}},{key:"getAllActivity",value:function(e){return b.get("/services/area",{params:e})}},{key:"get",value:function(e){return b.get("/services/".concat(e))}},{key:"create",value:function(e){return b.post("/services",e)}},{key:"update",value:function(e,t){return b.put("/services/".concat(e),t)}},{key:"delete",value:function(e){return b.delete("/services/".concat(e))}},{key:"deleteAll",value:function(){return b.delete("/services")}},{key:"findBySurname",value:function(e){return b.get("/services?surname=".concat(e))}},{key:"findObservations",value:function(e){return b.get("/services/".concat(e,"/obs"))}},{key:"deleteObservation",value:function(e,t){return b.delete("/services/".concat(e,"/obs?observation=").concat(t))}},{key:"addObservation",value:function(e,t){return b.put("/services/".concat(e,"/addob"),t)}}]),e}()),ce=a(62),ie=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).onChangeConcept=n.onChangeConcept.bind(Object(m.a)(n)),n.onChangeSessions=n.onChangeSessions.bind(Object(m.a)(n)),n.saveInvoice=n.saveInvoice.bind(Object(m.a)(n)),n.newInvoice=n.newInvoice.bind(Object(m.a)(n)),n.state={id:null,emittedTo:n.props.match.params.id,concept:"",sessions:1,services:[],submitted:!1},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.retrieveServices()}},{key:"retrieveServices",value:function(){var e=this;re.getAllActivity({activity:"Acupuntura"}).then((function(t){var a=t.data.data;0===a.length?e.setState({services:[]}):(console.log(a[0].id),e.setState({services:a,concept:a[0].id}))})).catch((function(e){console.log(e)}))}},{key:"onChangeConcept",value:function(e){console.log(e.target.options[e.target.selectedIndex].getAttribute("serviceid")),this.setState({concept:e.target.options[e.target.selectedIndex].getAttribute("serviceid")})}},{key:"onChangeSessions",value:function(e){console.log(e.target.value),this.setState({sessions:e.target.value})}},{key:"saveInvoice",value:function(){var e=this,t={emittedTo:this.state.emittedTo,concept:this.state.concept,sessions:this.state.sessions};console.log(t),ee.create(t).then((function(t){e.setState({submitted:!0})})).catch((function(e){console.log(e)}))}},{key:"newInvoice",value:function(){var e=this;this.setState((function(t){return{id:null,emittedTo:e.props.match.params.id,counter:t.counter,sessions:1,submitted:!1}}))}},{key:"render",value:function(){var e=this.state,t=e.services,a=e.sessions;return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12",style:{marginTop:"10px"}},r.a.createElement("div",{className:"submit-form"},this.state.submitted?r.a.createElement("div",null,r.a.createElement("h4",null,"Factura creada correctamente!"),r.a.createElement("button",{className:"btn btn-success",onClick:this.newInvoice},"Nueva")):r.a.createElement("div",null,r.a.createElement("div",{className:"form-group"},0===t.length?r.a.createElement("h4",null,"No hay servicios para esta actividad"):"",r.a.createElement(ce.a,null,r.a.createElement(ce.a.Group,{controlId:"exampleForm.ControlSelect2"},r.a.createElement(ce.a.Label,null,"Concepto"),r.a.createElement(ce.a.Control,{as:"select",onChange:this.onChangeConcept},t&&t.map((function(e,t){return r.a.createElement("option",{key:t,serviceid:e.id},e.name)})))),r.a.createElement(ce.a.Group,{controlId:"exampleForm.ControlInput1",onChange:this.onChangeSessions},r.a.createElement(ce.a.Label,null,"Sesiones"),r.a.createElement(ce.a.Control,{type:"text",defaultValue:a})))),r.a.createElement("button",{style:{marginBottom:"25px"},onClick:this.saveInvoice,className:"btn btn-secondary"},"A\xf1adir")))))}}]),a}(n.Component),le=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).onChangeConcept=n.onChangeConcept.bind(Object(m.a)(n)),n.onChangeSessions=n.onChangeSessions.bind(Object(m.a)(n)),n.saveInvoice=n.saveInvoice.bind(Object(m.a)(n)),n.newInvoice=n.newInvoice.bind(Object(m.a)(n)),n.state={id:null,emittedTo:n.props.match.params.id,concept:"",sessions:1,services:[],submitted:!1},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.retrieveServices()}},{key:"retrieveServices",value:function(){var e=this;re.getAllActivity({activity:"Psicolog\xeda"}).then((function(t){var a=t.data.data;0===a.length?e.setState({services:[]}):(console.log(a[0].id),e.setState({services:a,concept:a[0].id}))})).catch((function(e){console.log(e)}))}},{key:"onChangeConcept",value:function(e){console.log(e.target.options[e.target.selectedIndex].getAttribute("serviceid")),this.setState({concept:e.target.options[e.target.selectedIndex].getAttribute("serviceid")})}},{key:"onChangeSessions",value:function(e){console.log(e.target.value),this.setState({sessions:e.target.value})}},{key:"saveInvoice",value:function(){var e=this,t={emittedTo:this.state.emittedTo,concept:this.state.concept,sessions:this.state.sessions};console.log(t),ae.create(t).then((function(t){e.setState({submitted:!0})})).catch((function(e){console.log(e)}))}},{key:"newInvoice",value:function(){var e=this;this.setState((function(t){return{id:null,emittedTo:e.props.match.params.id,counter:t.counter,sessions:1,submitted:!1}}))}},{key:"render",value:function(){var e=this.state,t=e.services,a=e.sessions;return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12",style:{marginTop:"10px"}},r.a.createElement("div",{className:"submit-form"},this.state.submitted?r.a.createElement("div",null,r.a.createElement("h4",null,"Factura creada correctamente!"),r.a.createElement("button",{className:"btn btn-success",onClick:this.newInvoice},"Nueva")):r.a.createElement("div",null,r.a.createElement("div",{className:"form-group"},0===t.length?r.a.createElement("h4",null,"No hay servicios para esta actividad"):"",r.a.createElement(ce.a,null,r.a.createElement(ce.a.Group,{controlId:"exampleForm.ControlSelect2"},r.a.createElement(ce.a.Label,null,"Concepto"),r.a.createElement(ce.a.Control,{as:"select",onChange:this.onChangeConcept},t&&t.map((function(e,t){return r.a.createElement("option",{key:t,serviceid:e.id},e.name)})))),r.a.createElement(ce.a.Group,{controlId:"exampleForm.ControlInput1",onChange:this.onChangeSessions},r.a.createElement(ce.a.Label,null,"Sesiones"),r.a.createElement(ce.a.Control,{type:"text",defaultValue:a})))),r.a.createElement("button",{style:{marginBottom:"25px"},onClick:this.saveInvoice,className:"btn btn-secondary"},"A\xf1adir")))))}}]),a}(n.Component),oe=a(15),se=oe.f.create({container:{flexDirection:"row",alignItems:"stretch",marginTop:60},containerFactura:{flexDirection:"row",borderBottomWidth:1,borderBottomColor:"#112131",borderBottomStyle:"solid",alignItems:"stretch",marginTop:50},detailColumn:{flexDirection:"column",flexGrow:9,textTransform:"uppercase"},linkColumn:{flexDirection:"column",flexGrow:2,alignSelf:"flex-end",justifySelf:"flex-end"},name:{fontSize:24},address:{fontSize:10},subtitle:{fontSize:10,justifySelf:"flex-end"},image:{width:200,height:107}}),me=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(oe.h,{style:se.container},r.a.createElement(oe.h,{style:se.detailColumn},r.a.createElement(oe.b,{src:"/logo_co_2019_ok2peque_NEGRO.jpg",style:se.image})),r.a.createElement(oe.h,{style:se.linkColumn},r.a.createElement(oe.g,{style:se.address},"Calle Castelao 13-15, bajo"),r.a.createElement(oe.g,{style:se.address},"27001 Lugo"),r.a.createElement(oe.g,{style:se.address},"33535792K"),r.a.createElement(oe.g,{style:se.address},"Telf: 982 203 954"))),r.a.createElement(oe.h,{style:se.containerFactura},r.a.createElement(oe.g,{style:se.name},"Factura")))},ue=oe.f.create({container:{flexDirection:"row",alignItems:"stretch",marginTop:25},numberColumn:{flexDirection:"column",flexGrow:9,textTransform:"uppercase"},dateColumn:{flexDirection:"column",flexGrow:2,alignSelf:"flex-end",justifySelf:"flex-end",width:30,textAlign:"right"},basicFont:{fontSize:11}}),de=function(e){return r.a.createElement(oe.h,{style:ue.container},r.a.createElement(oe.h,{style:ue.numberColumn},r.a.createElement(oe.g,{style:ue.basicFont},"N\xfamero: ",e.number)),r.a.createElement(oe.h,{style:ue.dateColumn},r.a.createElement(oe.g,{style:[ue.basicFont,{width:100,textAlign:"right"}]},"Fecha: ",e.date)))},pe=oe.f.create({personalData:{flexDirection:"column",backgroundColor:"#f2f2f2",marginTop:60,paddingLeft:30,paddingBottom:30},containerRow:{flexDirection:"row",alignItems:"stretch",marginTop:20},attribute:{fontSize:11}}),he=function(e){return r.a.createElement(oe.h,{style:pe.personalData},r.a.createElement(oe.h,{style:pe.containerRow},r.a.createElement(oe.g,{style:pe.attribute},"Nombre: ",e.name," ",e.surname)),r.a.createElement(oe.h,{style:pe.containerRow},r.a.createElement(oe.g,{style:pe.attribute},"Direcci\xf3n: ",e.address)),r.a.createElement(oe.h,{style:pe.containerRow},r.a.createElement(oe.g,{style:pe.attribute},"DNI: ",e.dni)))},ve=oe.f.create({invoiceData:{flexDirection:"column",border:1,alignItems:"stretch",marginTop:60},containerHeaders:{display:"flex",flexDirection:"row",justifyContent:"center",marginTop:0},bolding:{fontWeight:900,fontSize:12,textDecoration:"underline",textTransform:"bold"},detailValue:{fontSize:11},containerDetails:{display:"flex",flexDirection:"row",justifyContent:"center",marginTop:0}}),ge=function(e){return r.a.createElement(oe.h,{style:ve.invoiceData},r.a.createElement(oe.h,{style:ve.containerHeaders},r.a.createElement(oe.h,{style:[ve.detailValue,{width:150,margin:5}]},r.a.createElement(oe.g,{style:ve.bolding},"Concepto")),r.a.createElement(oe.h,{style:[ve.detailValue,{width:50,margin:5}]},r.a.createElement(oe.g,{style:ve.bolding},"Sesiones")),r.a.createElement(oe.h,{style:[ve.detailValue,{width:50,margin:5}]},r.a.createElement(oe.g,{style:ve.bolding},"IVA")),r.a.createElement(oe.h,{style:[ve.detailValue,{width:50,margin:5}]},r.a.createElement(oe.g,{style:ve.bolding},"Base")),r.a.createElement(oe.h,{style:[ve.detailValue,{width:50,margin:5}]},r.a.createElement(oe.g,{style:ve.bolding},"Importe"))),r.a.createElement(oe.h,{style:ve.containerDetails},r.a.createElement(oe.h,{style:[ve.detailValue,{width:150,margin:5}]},r.a.createElement(oe.g,null,e.concept)),r.a.createElement(oe.h,{style:[ve.detailValue,{width:50,margin:5}]},r.a.createElement(oe.g,null,e.sessions)),r.a.createElement(oe.h,{style:[ve.detailValue,{width:50,margin:5}]},r.a.createElement(oe.g,null,e.iva)),r.a.createElement(oe.h,{style:[ve.detailValue,{width:50,margin:5}]},r.a.createElement(oe.g,null,e.base)),r.a.createElement(oe.h,{style:[ve.detailValue,{width:50,margin:5}]},r.a.createElement(oe.g,null,e.total))))},fe=oe.f.create({footerText:{fontSize:8},footer:{flexDirection:"row",alignItems:"stretch",marginTop:100}}),be=function(){return r.a.createElement(oe.h,{style:fe.footer},r.a.createElement(oe.g,{style:fe.footerText},"De conformidad con la Ley Org\xe1nica 15/1999 de Protecci\xf3n de Datos, CENTRO OTOMO le informa de que sus datos personales est\xe1n incluidos en un fichero denominado FICHERO DE DATOS DE PACIENTES inscrito en la Agencia Espa\xf1ola de Protecci\xf3n de Datos y cuya finalidad es la GESTI\xd3N DE PACIENTES, pudiendo ejercitar sus derechos de OPOSICI\xd3N, ACCESO, RECTIFICACI\xd3N Y/O CANCELACI\xd3N mediante escrito a: CENTRO OTOMO, calle Castelao 13-15, bajo, 27001 Lugo,indicando por escrito su petici\xf3n y adjuntando fotocopia de DNI o en su defecto doccumento que acredite su debida identidad."))},Ee=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={invoiceData:{},id:0},n}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props.location.state.invoice,t=new Date(e.createdAt),a=t.getDate(),n=t.getMonth()+1,c=t.getFullYear(),i="".concat(e.inumber,"/").concat(c),l="".concat(a,"-").concat(n,"-").concat(c),o=oe.f.create({page:{padding:30}});return r.a.createElement("div",{className:"row"},r.a.createElement(oe.d,{key:Math.random(),style:{width:800,height:1300}},r.a.createElement(oe.a,{author:"Centro Otomo",keywords:"acupuntura, psicolog\xeda",subject:"Factura",title:"Factura"},r.a.createElement(oe.e,{size:"A4",style:o.page},r.a.createElement(me,null),r.a.createElement(de,{number:i,date:l}),r.a.createElement(he,{name:e.name,surname:e.surname,address:e.address,dni:e.dni}),r.a.createElement(ge,{concept:e.concept,sessions:e.sessions,iva:e.iva,base:e.base,total:e.total}),r.a.createElement(be,null)))))}}]),a}(n.Component),ye=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={invoiceData:{},id:0},n}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props.location.state.invoice,t=new Date(e.createdAt),a=t.getDate(),n=t.getMonth()+1,c=t.getFullYear(),i="".concat(e.inumber,"/").concat(c),l="".concat(a,"-").concat(n,"-").concat(c),o=function(){return r.a.createElement(oe.a,{author:"Centro Otomo",keywords:"acupuntura, psicolog\xeda",subject:"Factura",title:"Factura"},r.a.createElement(oe.e,{size:"A4",style:s.page},r.a.createElement(me,null),r.a.createElement(de,{number:i,date:l}),r.a.createElement(he,{name:e.name,surname:e.surname,address:e.address,dni:e.dni}),r.a.createElement(ge,{concept:e.concept,sessions:e.sessions,iva:e.iva,base:e.base,total:e.total}),r.a.createElement(be,null)))},s=oe.f.create({page:{padding:30}});return r.a.createElement("div",{className:"row"},r.a.createElement(oe.c,{document:r.a.createElement(o,null),fileName:"".concat(i,"-").concat(l," .pdf")},(function(e){e.blob,e.url;var t=e.loading;e.error;return t?"Cargando documento...":"Descargar ahora!"})))}}]),a}(n.Component),Ce=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={invoiceData:{},id:0},n}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props.location.state.invoice,t=new Date(e.createdAt),a=t.getDate(),n=t.getMonth()+1,c=t.getFullYear(),i="".concat(e.inumber,"/").concat(c),l="".concat(a,"-").concat(n,"-").concat(c),o=oe.f.create({page:{padding:30}});return r.a.createElement("div",{className:"row"},r.a.createElement(oe.d,{key:Math.random(),style:{width:800,height:1300}},r.a.createElement(oe.a,{author:"Centro Otomo",keywords:"acupuntura, psicolog\xeda",subject:"Factura",title:"Factura"},r.a.createElement(oe.e,{size:"A4",style:o.page},r.a.createElement(me,null),r.a.createElement(de,{number:i,date:l}),r.a.createElement(he,{name:e.name,surname:e.surname,address:e.address,dni:e.dni}),r.a.createElement(ge,{concept:e.concept,sessions:e.sessions,iva:e.iva,base:e.base,total:e.total}),r.a.createElement(be,null)))))}}]),a}(n.Component),Ne=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={invoiceData:{},id:0},n}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props.location.state.invoice,t=new Date(e.createdAt),a=t.getDate(),n=t.getMonth()+1,c=t.getFullYear(),i="".concat(e.inumber,"/").concat(c),l="".concat(a,"-").concat(n,"-").concat(c),o=function(){return r.a.createElement(oe.a,{author:"Centro Otomo",keywords:"acupuntura, psicolog\xeda",subject:"Factura",title:"Factura"},r.a.createElement(oe.e,{size:"A4",style:s.page},r.a.createElement(me,null),r.a.createElement(de,{number:i,date:l}),r.a.createElement(he,{name:e.name,surname:e.surname,address:e.address,dni:e.dni}),r.a.createElement(ge,{concept:e.concept,sessions:e.sessions,iva:e.iva,base:e.base,total:e.total}),r.a.createElement(be,null)))},s=oe.f.create({page:{padding:30}});return r.a.createElement("div",{className:"row"},r.a.createElement(oe.c,{document:r.a.createElement(o,null),fileName:"".concat(i,"-").concat(l," .pdf")},(function(e){e.blob,e.url;var t=e.loading;e.error;return t?"Cargando documento...":"Descargar ahora!"})))}}]),a}(n.Component);C.a.locale("es");var ke=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).retrieveObservations=n.retrieveObservations.bind(Object(m.a)(n)),n.deleteObservation=n.deleteObservation.bind(Object(m.a)(n)),n.sortObs=n.sortObs.bind(Object(m.a)(n)),n.sortObsInv=n.sortObsInv.bind(Object(m.a)(n)),n.state={id:n.props.match.params.id,observations:[]},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.retrieveObservations()}},{key:"componentDidUpdate",value:function(e,t){}},{key:"retrieveObservations",value:function(){var e=this,t=this.state.id;E.findObservations(t).then((function(t){var a=t.data.sort((function(e,t){return new Date(t.createdAt)-new Date(e.createdAt)}));e.setState({observations:a})})).catch((function(e){console.log(e)}))}},{key:"deleteObservation",value:function(e){var t=this,a=e.target.getAttribute("aid");E.deleteObservation(this.state.id,a).then((function(e){var a=t.state.observations.filter((function(t){return t.id!==e.data.observation}));console.log(a),t.setState({observations:a})})).catch((function(e){console.log(e)}))}},{key:"sortObs",value:function(){var e=this.state.observations.sort((function(e,t){return new Date(t.createdAt)-new Date(e.createdAt)}));this.setState({observations:e})}},{key:"sortObsInv",value:function(){var e=this.state.observations.sort((function(e,t){return new Date(e.createdAt)-new Date(t.createdAt)}));this.setState({observations:e})}},{key:"render",value:function(){var e=this,t=this.state,a=t.id,n=t.observations;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row",style:{marginTop:"10px"}},r.a.createElement("div",{className:"col-6",style:{marginBottom:"10px"}},r.a.createElement(D.a,{href:"/patients/".concat(a,"/obs/new"),variant:"secondary"},"Nueva")),r.a.createElement("div",{className:"col-6",style:{marginBottom:"10px",display:"flex",justifyContent:"flex-end"}},r.a.createElement("div",null,[V.a].map((function(t,a){return r.a.createElement(t,{as:A.a,key:a,id:"dropdown-button-drop-".concat(a),variant:"secondary",title:"Ordernar"},r.a.createElement(w.a.Item,{eventKey:"1",onClick:e.sortObs},"Recientes"),r.a.createElement(w.a.Divider,null),r.a.createElement(w.a.Item,{eventKey:"2",onClick:e.sortObsInv},"Antiguos"))}))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},n&&n.map((function(t,a){return r.a.createElement(_.a,{style:{marginBottom:"10px"},key:a},r.a.createElement(_.a.Body,null,r.a.createElement(_.a.Title,null,C()(t.createdAt).format("DD/MM/YYYY - hh:mm:ss")),r.a.createElement(_.a.Subtitle,{className:"mb-2 text-muted"}),r.a.createElement(_.a.Text,null,t.note,r.a.createElement("br",null)),r.a.createElement(_.a.Link,{href:"#",aid:t.id,arrindx:a,onClick:e.deleteObservation},"Borrar")))})),r.a.createElement("p",null,"\xa0"))))}}]),a}(n.Component),Oe=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).onChangeNote=n.onChangeNote.bind(Object(m.a)(n)),n.addObservation=n.addObservation.bind(Object(m.a)(n)),n.state={id:n.props.match.params.id,note:"",success:!1},n}return Object(s.a)(a,[{key:"onChangeNote",value:function(e){this.setState({note:e.target.value})}},{key:"addObservation",value:function(){var e=this,t={note:this.state.note};E.addObservation(this.state.id,t).then((function(t){e.setState({success:!0})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return this.state.success?r.a.createElement(p.a,{to:"/patients/".concat(this.state.id,"/obs")}):r.a.createElement("div",{className:"submit-form"},this.state.submitted?r.a.createElement("div",null,r.a.createElement("h4",null,"A\xf1adido correctamente!"),r.a.createElement("button",{className:"btn btn-success",onClick:this.newPatient},"Nuevo")):r.a.createElement("div",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"note"},"Note"),r.a.createElement("textarea",{type:"text",className:"form-control",id:"note",required:!0,value:this.state.note,onChange:this.onChangeNote,name:"note",rows:"10"})),r.a.createElement("button",{style:{marginBottom:"25px"},onClick:this.addObservation,className:"btn btn-secondary"},"Guardar")))}}]),a}(n.Component),xe=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).retrieveServices=n.retrieveServices.bind(Object(m.a)(n)),n.state={services:[]},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.retrieveServices()}},{key:"retrieveServices",value:function(){var e=this;re.getAll({}).then((function(t){var a=t.data.data;e.setState({services:a})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this.state.services;return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12",style:{marginTop:"10px"}},e&&e.map((function(e,t){return r.a.createElement("div",{className:"row",key:t,style:{marginTop:"10px"}},r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("p",null,"Servicio: ",e.name),r.a.createElement("p",null,"Actividad: ",e.activity),r.a.createElement("p",null,"IVA: ",e.iva),r.a.createElement("p",null,"Coste: ",e.cost))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement(D.a,{variant:"secondary",href:"/services/"+e.id},"Modificar")))))))}))))}}]),a}(n.Component),Se=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).onChangeIVA=n.onChangeIVA.bind(Object(m.a)(n)),n.onChangeName=n.onChangeName.bind(Object(m.a)(n)),n.onChangeActivity=n.onChangeActivity.bind(Object(m.a)(n)),n.createService=n.createService.bind(Object(m.a)(n)),n.newService=n.newService.bind(Object(m.a)(n)),n.onChangeCost=n.onChangeCost.bind(Object(m.a)(n)),n.state={name:"",iva:0,cost:0,submitted:!1,activity:""},n}return Object(s.a)(a,[{key:"onChangeIVA",value:function(e){this.setState({iva:e.target.value})}},{key:"onChangeName",value:function(e){this.setState({name:e.target.value})}},{key:"onChangeCost",value:function(e){this.setState({cost:e.target.value})}},{key:"onChangeActivity",value:function(e){this.setState({activity:e.target.value})}},{key:"createService",value:function(){var e=this,t={iva:this.state.iva,name:this.state.name,cost:this.state.cost,activity:this.state.activity};re.create(t).then((function(t){e.setState({submitted:!0})})).catch((function(e){console.log(e)}))}},{key:"newService",value:function(){this.setState({name:"",iva:0,cost:0,submitted:!1,activity:""})}},{key:"render",value:function(){return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12",style:{marginTop:"10px"}},r.a.createElement("div",{className:"submit-form"},this.state.submitted?r.a.createElement("div",null,r.a.createElement("h4",null,"Servicio a\xf1adido correctamente!"),r.a.createElement("button",{className:"btn btn-success",onClick:this.newService},"Nuevo")):r.a.createElement("div",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"name"},"Servicio"),r.a.createElement("input",{type:"text",className:"form-control",id:"name",required:!0,value:this.state.name,onChange:this.onChangeName,name:"name"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"activity"},"Actividad"),r.a.createElement("input",{type:"text",className:"form-control",id:"activity",required:!0,value:this.state.activity,onChange:this.onChangeActivity,name:"activity"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"iva"},"IVA"),r.a.createElement("input",{type:"text",className:"form-control",id:"iva",required:!0,value:this.state.iva,onChange:this.onChangeIVA,name:"iva"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"cost"},"Coste"),r.a.createElement("input",{type:"text",className:"form-control",id:"cost",required:!0,value:this.state.cost,onChange:this.onChangeCost,name:"cost"})),r.a.createElement("button",{style:{marginBottom:"25px"},onClick:this.createService,className:"btn btn-secondary"},"A\xf1adir")))))}}]),a}(n.Component),je=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).onChangeIVA=n.onChangeIVA.bind(Object(m.a)(n)),n.onChangeName=n.onChangeName.bind(Object(m.a)(n)),n.onChangeCost=n.onChangeCost.bind(Object(m.a)(n)),n.updateService=n.updateService.bind(Object(m.a)(n)),n.state={id:null,name:"",iva:0,cost:0,submitted:!1},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.getService(this.props.match.params.id)}},{key:"getService",value:function(e){var t=this;re.get(e).then((function(e){t.setState({id:e.data.id,name:e.data.name,iva:e.data.iva,cost:e.data.cost})})).catch((function(e){console.log(e)}))}},{key:"onChangeIVA",value:function(e){this.setState({iva:e.target.value})}},{key:"onChangeName",value:function(e){this.setState({name:e.target.value})}},{key:"onChangeCost",value:function(e){this.setState({cost:e.target.value})}},{key:"updateService",value:function(){var e=this,t={iva:this.state.iva,name:this.state.name,cost:this.state.cost};re.update(this.state.id,t).then((function(t){e.setState({submitted:!0})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"row",style:{marginTop:"10px"}},r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"submit-form"},this.state.submitted?r.a.createElement(p.a,{to:"/services"}):r.a.createElement("div",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"title"},"Servicio"),r.a.createElement("input",{type:"text",className:"form-control",id:"name",required:!0,value:this.state.name,onChange:this.onChangeName,name:"name"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"iva"},"IVA"),r.a.createElement("input",{type:"text",className:"form-control",id:"iva",required:!0,value:this.state.iva,onChange:this.onChangeIVA,name:"iva"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"cost"},"Coste"),r.a.createElement("input",{type:"text",className:"form-control",id:"cost",required:!0,value:this.state.cost,onChange:this.onChangeCost,name:"cost"})),r.a.createElement("button",{style:{marginBottom:"25px"},onClick:this.updateService,className:"btn btn-secondary"},"Actualizar")))))}}]),a}(n.Component),De=a(182),Ae=a(158),we=a(87),Pe="http://128.199.52.198/api/auth/",Ie=new(function(){function e(){Object(o.a)(this,e)}return Object(s.a)(e,[{key:"login",value:function(e,t){return g.a.post(Pe+"signin",{username:e,password:t}).then((function(e){return e.data.accessToken&&localStorage.setItem("user",JSON.stringify(e.data)),e.data}))}},{key:"logout",value:function(){localStorage.removeItem("user")}},{key:"register",value:function(e,t,a){return g.a.post(Pe+"signup",{username:e,email:t,password:a})}},{key:"getCurrentUser",value:function(){return JSON.parse(localStorage.getItem("user"))}}]),e}()),Te=a(224),Me=a.n(Te),Fe=a(131),Ye=a.n(Fe),Be=a(225),Re=a.n(Be),Le=function(e){if(!e)return r.a.createElement("div",{className:"alert alert-danger",role:"alert"},"This field is required!")},ze=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).handleLogin=n.handleLogin.bind(Object(m.a)(n)),n.onChangeUsername=n.onChangeUsername.bind(Object(m.a)(n)),n.onChangePassword=n.onChangePassword.bind(Object(m.a)(n)),n.state={username:"",password:"",loading:!1,message:""},n}return Object(s.a)(a,[{key:"onChangeUsername",value:function(e){this.setState({username:e.target.value})}},{key:"onChangePassword",value:function(e){this.setState({password:e.target.value})}},{key:"handleLogin",value:function(e){var t=this;e.preventDefault(),this.setState({message:"",loading:!0}),this.form.validateAll(),0===this.checkBtn.context._errors.length?Ie.login(this.state.username,this.state.password).then((function(){t.props.history.push("/profile"),window.location.reload()}),(function(e){var a=e.response&&e.response.data&&e.response.data.message||e.message||e.toString();t.setState({loading:!1,message:a})})):this.setState({loading:!1})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"col-md-12"},r.a.createElement("div",{className:"card card-container"},r.a.createElement("img",{src:"//ssl.gstatic.com/accounts/ui/avatar_2x.png",alt:"profile-img",className:"profile-img-card"}),r.a.createElement(Me.a,{onSubmit:this.handleLogin,ref:function(t){e.form=t}},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"username"},"Nombre"),r.a.createElement(Ye.a,{type:"text",className:"form-control",name:"username",value:this.state.username,onChange:this.onChangeUsername,validations:[Le]})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password"},"Contrase\xf1a"),r.a.createElement(Ye.a,{type:"password",className:"form-control",name:"password",value:this.state.password,onChange:this.onChangePassword,validations:[Le]})),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"btn btn-primary btn-block",disabled:this.state.loading},this.state.loading&&r.a.createElement("span",{className:"spinner-border spinner-border-sm"}),r.a.createElement("span",null,"Login"))),this.state.message&&r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"alert alert-danger",role:"alert"},this.state.message)),r.a.createElement(Re.a,{style:{display:"none"},ref:function(t){e.checkBtn=t}}))))}}]),a}(n.Component),Ue=a(383),qe=function(e){if(!e)return r.a.createElement("div",{className:"alert alert-danger",role:"alert"},"This field is required!")},Ke=function(e){if(!Object(Ue.isEmail)(e))return r.a.createElement("div",{className:"alert alert-danger",role:"alert"},"This is not a valid email.")},Ve=function(e){if(e.length<3||e.length>20)return r.a.createElement("div",{className:"alert alert-danger",role:"alert"},"The username must be between 3 and 20 characters.")},He=function(e){if(e.length<6||e.length>40)return r.a.createElement("div",{className:"alert alert-danger",role:"alert"},"The password must be between 6 and 40 characters.")},Ge=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).handleRegister=n.handleRegister.bind(Object(m.a)(n)),n.onChangeUsername=n.onChangeUsername.bind(Object(m.a)(n)),n.onChangeEmail=n.onChangeEmail.bind(Object(m.a)(n)),n.onChangePassword=n.onChangePassword.bind(Object(m.a)(n)),n.state={username:"",email:"",password:"",successful:!1,message:""},n}return Object(s.a)(a,[{key:"onChangeUsername",value:function(e){this.setState({username:e.target.value})}},{key:"onChangeEmail",value:function(e){this.setState({email:e.target.value})}},{key:"onChangePassword",value:function(e){this.setState({password:e.target.value})}},{key:"handleRegister",value:function(e){var t=this;e.preventDefault(),this.setState({message:"",successful:!1}),this.form.validateAll(),0===this.checkBtn.context._errors.length&&Ie.register(this.state.username,this.state.email,this.state.password).then((function(e){t.setState({message:e.data.message,successful:!0})}),(function(e){var a=e.response&&e.response.data&&e.response.data.message||e.message||e.toString();t.setState({successful:!1,message:a})}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"col-md-12"},r.a.createElement("div",{className:"card card-container"},r.a.createElement("img",{src:"//ssl.gstatic.com/accounts/ui/avatar_2x.png",alt:"profile-img",className:"profile-img-card"}),r.a.createElement(Me.a,{onSubmit:this.handleRegister,ref:function(t){e.form=t}},!this.state.successful&&r.a.createElement("div",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"username"},"Username"),r.a.createElement(Ye.a,{type:"text",className:"form-control",name:"username",value:this.state.username,onChange:this.onChangeUsername,validations:[qe,Ve]})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement(Ye.a,{type:"text",className:"form-control",name:"email",value:this.state.email,onChange:this.onChangeEmail,validations:[qe,Ke]})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement(Ye.a,{type:"password",className:"form-control",name:"password",value:this.state.password,onChange:this.onChangePassword,validations:[qe,He]})),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"btn btn-primary btn-block"},"Sign Up"))),this.state.message&&r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:this.state.successful?"alert alert-success":"alert alert-danger",role:"alert"},this.state.message)),r.a.createElement(Re.a,{style:{display:"none"},ref:function(t){e.checkBtn=t}}))))}}]),a}(n.Component),_e=new(function(){function e(){Object(o.a)(this,e)}return Object(s.a)(e,[{key:"getPublicContent",value:function(){return g.a.get("http://128.199.52.198/api/test/all")}},{key:"getUserBoard",value:function(){return g.a.get("http://128.199.52.198/api/test/user",{headers:f()})}},{key:"getModeratorBoard",value:function(){return g.a.get("http://128.199.52.198/api/test/mod",{headers:f()})}},{key:"getAdminBoard",value:function(){return g.a.get("http://128.199.52.198/api/test/admin",{headers:f()})}}]),e}()),We=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={content:""},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;_e.getPublicContent().then((function(t){e.setState({content:t.data})}),(function(t){e.setState({content:t.response&&t.response.data||t.message||t.toString()})}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("header",{className:"jumbotron"},r.a.createElement("h3",null,this.state.content)))}}]),a}(n.Component),Je=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={redirect:null,userReady:!1,currentUser:{username:""}},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=Ie.getCurrentUser();e||this.setState({redirect:"/home"}),this.setState({currentUser:e,userReady:!0})}},{key:"render",value:function(){if(this.state.redirect)return r.a.createElement(p.a,{to:this.state.redirect});var e=this.state.currentUser;return r.a.createElement("div",{className:"container"},this.state.userReady?r.a.createElement("div",null,r.a.createElement("header",{className:"jumbotron"},r.a.createElement("h3",null,r.a.createElement("strong",null,e.username)," Profile")),r.a.createElement("p",null,r.a.createElement("strong",null,"Token:")," ",e.accessToken.substring(0,20)," ..."," ",e.accessToken.substr(e.accessToken.length-20)),r.a.createElement("p",null,r.a.createElement("strong",null,"Id:")," ",e.id),r.a.createElement("p",null,r.a.createElement("strong",null,"Email:")," ",e.email),r.a.createElement("strong",null,"Authorities:"),r.a.createElement("ul",null,e.roles&&e.roles.map((function(e,t){return r.a.createElement("li",{key:t},e)})))):null)}}]),a}(n.Component),Xe=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={content:""},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;_e.getUserBoard().then((function(t){e.setState({content:t.data})}),(function(t){e.setState({content:t.response&&t.response.data&&t.response.data.message||t.message||t.toString()})}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("header",{className:"jumbotron"},r.a.createElement("h3",null,this.state.content)))}}]),a}(n.Component),Qe=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={content:""},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;_e.getModeratorBoard().then((function(t){e.setState({content:t.data})}),(function(t){e.setState({content:t.response&&t.response.data&&t.response.data.message||t.message||t.toString()})}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("header",{className:"jumbotron"},r.a.createElement("h3",null,this.state.content)))}}]),a}(n.Component),$e=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={content:""},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;_e.getAdminBoard().then((function(t){e.setState({content:t.data})}),(function(t){e.setState({content:t.response&&t.response.data&&t.response.data.message||t.message||t.toString()})}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("header",{className:"jumbotron"},r.a.createElement("h3",null,this.state.content)))}}]),a}(n.Component),Ze=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).logOut=n.logOut.bind(Object(m.a)(n)),n.state={showModeratorBoard:!1,showAdminBoard:!1,currentUser:void 0},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=Ie.getCurrentUser();e&&this.setState({currentUser:e,showModeratorBoard:e.roles.includes("ROLE_MODERATOR"),showAdminBoard:e.roles.includes("ROLE_ADMIN")})}},{key:"logOut",value:function(){Ie.logout()}},{key:"render",value:function(){var e=this.state,t=e.currentUser,a=e.showModeratorBoard,n=e.showAdminBoard;return r.a.createElement(r.a.Fragment,null,r.a.createElement(De.a,{bg:"dark",variant:"dark",fixed:"top"},r.a.createElement(De.a.Brand,{href:"/home"},"Otomo"),r.a.createElement(De.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(De.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(Ae.a,{className:"mr-auto"},n&&r.a.createElement(Ae.a.Link,{href:"/appointments"},"Citas"),(n||a)&&r.a.createElement(we.a,{alignRight:!0,title:"Pacientes",id:"basic-nav-dropdown"},r.a.createElement(we.a.Item,{href:"/patients"},"Buscar"),r.a.createElement(we.a.Divider,null),r.a.createElement(we.a.Item,{href:"/add"},"Nuevo")),n&&r.a.createElement(we.a,{alignRight:!0,title:"Facturas",id:"basic-nav-dropdown"},r.a.createElement(we.a.Item,{href:"/invoices"},"Facturas Acupuntura"),r.a.createElement(we.a.Item,{href:"/invoicespsico"},"Facturas Psicolog\xeda"),r.a.createElement(we.a.Divider,null),r.a.createElement(we.a.Item,{href:"/services"},"Servicios"),r.a.createElement(we.a.Item,{href:"/addservice"},"Nuevo Servicio")),t?r.a.createElement(r.a.Fragment,null,r.a.createElement(Ae.a.Link,{href:"/profile"},t.username),r.a.createElement("a",{href:"/login",className:"nav-link",onClick:this.logOut},"Salir")):r.a.createElement(r.a.Fragment,null,r.a.createElement(Ae.a.Link,{href:"/login"},"Login"),r.a.createElement(Ae.a.Link,{href:"/register"},"Sign Up"))))),r.a.createElement("div",{className:"container"},r.a.createElement(l.a,null,r.a.createElement(p.d,null,r.a.createElement(p.b,{exact:!0,path:["/","/home"],component:We}),r.a.createElement(p.b,{exact:!0,path:"/login",component:ze}),r.a.createElement(p.b,{exact:!0,path:"/register",component:Ge}),r.a.createElement(p.b,{exact:!0,path:"/profile",component:Je}),r.a.createElement(p.b,{path:"/user",component:Xe}),r.a.createElement(p.b,{path:"/mod",component:Qe}),r.a.createElement(p.b,{path:"/admin",component:$e}),r.a.createElement(p.b,{exact:!0,path:["/","/appointments"],component:U}),r.a.createElement(p.b,{exact:!0,path:["/","/appointments/after/:selected"],component:U}),r.a.createElement(p.b,{exact:!0,path:"/addappointment/:id",component:G}),r.a.createElement(p.b,{path:"/appointments/patient/:id",component:$}),r.a.createElement(p.b,{exact:!0,path:["/","/patients"],component:M}),r.a.createElement(p.b,{exact:!0,path:["/","/patients/appoint/:id"],component:M}),r.a.createElement(p.b,{exact:!0,path:"/add",component:N}),r.a.createElement(p.b,{exact:!0,path:"/patients/:id",component:x}),r.a.createElement(p.b,{exact:!0,path:"/patients/:id/obs",component:ke}),r.a.createElement(p.b,{path:"/patients/:id/obs/new",component:Oe}),r.a.createElement(p.b,{exact:!0,path:["/","/invoicespsico"],component:ne}),r.a.createElement(p.b,{exact:!0,path:"/addinvoicepsico/:id",component:le}),r.a.createElement(p.b,{exact:!0,path:"/invoicespsicomobile/pdf/:id",component:Ne}),r.a.createElement(p.b,{exact:!0,path:"/invoicespsico/pdf/:id",component:Ce}),r.a.createElement(p.b,{exact:!0,path:["/","/invoices"],component:te}),r.a.createElement(p.b,{exact:!0,path:"/addinvoice/:id",component:ie}),r.a.createElement(p.b,{path:"/invoicesmobile/pdf/:id",component:ye}),r.a.createElement(p.b,{path:"/invoices/pdf/:id",component:Ee}),r.a.createElement(p.b,{exact:!0,path:["/","/services"],component:xe}),r.a.createElement(p.b,{exact:!0,path:"/addservice",component:Se}),r.a.createElement(p.b,{exact:!0,path:"/services/:id",component:je})))))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var et=a(384),tt=a(232);et.a.add(tt.b,tt.a,tt.c),i.a.render(r.a.createElement(l.a,null,r.a.createElement(Ze,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[401,1,2]]]);